(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+3Pf":function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,"._2k9QxMzNFjSLxe4cLhx7uH {\n    margin-left: 10px;\n}\n._2k9QxMzNFjSLxe4cLhx7uH._2pt5dl-VzLueHh_pBgqDF7 {\n    margin-left: 20px;\n    padding-bottom: 0;\n    padding-right: 0;\n}\n._33n9OKDfuHLhO7Fhe_OaUM {\n    position: relative;\n    box-sizing: border-box;\n    width: 100%;\n    margin-left: -10px;\n    padding: 10px 0 0 10px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n._33n9OKDfuHLhO7Fhe_OaUM:last-child {\n    padding-bottom: 10px;\n}\n._2pt5dl-VzLueHh_pBgqDF7 ._33n9OKDfuHLhO7Fhe_OaUM::before,\n._2pt5dl-VzLueHh_pBgqDF7 ._33n9OKDfuHLhO7Fhe_OaUM::after {\n    content: '';\n    position: absolute;\n    left: 0;\n    border: solid #656565;\n    width: 9px;\n}\n._2pt5dl-VzLueHh_pBgqDF7 ._33n9OKDfuHLhO7Fhe_OaUM::before {\n    top: -10px;\n    height: 30px;\n    border-width: 0 0 1px 1px;\n}\n._2pt5dl-VzLueHh_pBgqDF7 ._33n9OKDfuHLhO7Fhe_OaUM:first-child:before {\n    height: 20px;\n    top: 0;\n}\n._2pt5dl-VzLueHh_pBgqDF7 ._33n9OKDfuHLhO7Fhe_OaUM::after {\n    top: 20px;\n    height: 10px;\n    border-width: 0 0 0 1px;\n}\n._2pt5dl-VzLueHh_pBgqDF7 ._33n9OKDfuHLhO7Fhe_OaUM:last-child {\n    padding-bottom: 0;\n}\n._2pt5dl-VzLueHh_pBgqDF7 ._33n9OKDfuHLhO7Fhe_OaUM:last-child:after {\n    border-width: 0;\n}\n._2aqLcWA7brJ-w6mo0D4hce {\n    vertical-align: middle;\n}\n._2aqLcWA7brJ-w6mo0D4hce {\n    padding-left: 10px;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n",""]),t.locals={outlineList:"_2k9QxMzNFjSLxe4cLhx7uH",__inner:"_2pt5dl-VzLueHh_pBgqDF7",outlineListItem:"_33n9OKDfuHLhO7Fhe_OaUM",outlineLabel:"_2aqLcWA7brJ-w6mo0D4hce"}},"/Wf7":function(e,t,n){var i=n("+3Pf");"string"==typeof i&&(i=[[e.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(i,a);i.locals&&(e.exports=i.locals)},"44p9":function(e,t,n){"use strict";n.r(t),function(e){var i=n("zdLb"),a=n("K6OD"),r=n("JSKl"),o=n("8H+l"),l=n("DiwI"),s=n("6nAx"),c=n("kn+Y"),u=function(){return{render:function(){return!0}}},d=i.default.extend({initialize:function(e){i.default.prototype.initialize.apply(this,[e]),this.ShareButtonView=u,this.EmbedButtonView=u,this.VideoView=a.default,this.ChartView=r.default,this.MediaVideoView=o.default,this.SlideshareView=l.default,this.MediaImageView=s.default,delete window.moveables}});e.extend(d.prototype,c.default),t.default=d}.call(this,n("LvDl"))},"80VO":function(e,t,n){var i=n("wQZe");"string"==typeof i&&(i=[[e.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(i,a);i.locals&&(e.exports=i.locals)},"8H+l":function(e,t,n){"use strict";n.r(t),function(e){var i=n("OHxV"),a=n("NW2p"),r=n("Du7+");t.default=a.default.extend({template:i.default,render:function(){if(a.default.prototype.render.apply(this),"vimeo"===this.model.get("media_type")){var t=this.$(".video"),n=this.model.get("shrink"),i=e(".ig-items").width();if(n){var o=r.default.getMargin();i=(e(".ig-items").width()-o)/2}t.height(.75*i)}return this}})}.call(this,n("+hRF"))},BlEU:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return r}));var i=n("Zcty"),a=n("sCQ0");function r(e){i.default.dispatch({type:a.default.RESPONSIVE_INFOGRAPHIC_HEIGHT,height:e})}},CKCE:function(e,t,n){"use strict";n.r(t),t.default='<table>\n  <tr>\n    <td style="vertical-align: top; padding-top: 3px;">\n      <img src="/i/video.svg" style="width: 51px;">\n    </td>\n    <td style="vertical-align: middle !important;">\n      <div class="bodytext" style="float: left; margin-left: 20px;">\n        <div class="inner"><%= url %></div>\n      </div>\n    </td>\n  </tr>\n</table>\n'},JSKl:function(e,t,n){"use strict";n.r(t),function(e,i){var a=n("iqBm"),r=n("Izd2"),o=n("h7h9"),l=n("avtj"),s=n("JTIy"),c=n("SvMf"),u=n("73IX"),d=n("pWQL");t.default=l.default.extend({template:a.default,className:"chartcontainer",initialize:function(t){var n=this;l.default.prototype.initialize.apply(this,[t]);var i=this.model.getTypeMod(),a=this.getData(),r=Object(u.default)(i,this.model.get("custom")),o=this.model.get("sheetnames")||[],f=!0===r.switchRowsColumns;this.showTitles=!0,this.animate="gif"===e.get(this,"parent.options.exportSettings.imageFormat"),"24_0"===i&&(this.animate=!1),this.charts_data=[],this.rendered=[];var h=[],p=[],m=this.options.renderSettings,v=this.model.get("object_id");p=c.default.readHiddenChildren(v);var g=this.options.showColumns||[];if(s.default.hasMultipleSheets({typeMod:i,custom:r,data:a})&&!r.useAllColumns)this.titles=[],a.forEach((function(e,t){var i=[e];(g.length&&-1===g.indexOf(t)||-1!==p.indexOf(t))&&h.push(t),n.titles[t]=n._createTitle(o[t]||(e[0]?e[0][0]:"Sheet "+t),t),n.charts_data.push(i)})),this.titles.length<2&&(this.showTitles=!1);else{this.titles=[];var b=a||[];this.groupedTitles=[],r.useAllColumns||(b=[a[0]]);var y=0;b.forEach((function(e,t){e.length?(n.groupedTitles[t]=f?e.slice(1).map((function(e){return n._createTitle(e[0],y++)})):e[0].slice(1).map((function(e){return n._createTitle(e,y++)})),n.titles=n.titles.concat(n.groupedTitles[t])):n.groupedTitles[t]=[]}));var _=t.parent.showObjects&&Object.keys(t.parent.showObjects).length;if(!this.titles.length||1===this.titles.length&&!_)this.showTitles=!1,this.charts_data.push(a);else{var O=0;b.forEach((function(t,i){f?n.groupedTitles[i].forEach((function(e,i){var a=[[t[0].slice(0),t[i+1].slice(0)]];n.charts_data.push(a),(g.length&&-1===g.indexOf(O)||-1!==p.indexOf(O))&&h.push(O),O++})):n.groupedTitles[i].forEach((function(i,a){var r=a+1,o=[[]];o[0]=e.map(t,(function(e){return[e[0],e[r]]})),n.charts_data.push(o),(g.length&&-1===g.indexOf(O)||-1!==p.indexOf(O))&&h.push(O),O++}))}))}[d.BAR_RACE,d.BAR_RACE_IMG].includes(i)&&(this.showTitles=!1)}if(m.displayEnabledChartsOnly&&h.length>0){var w=this.titles,E=w.length,S=this.charts_data;this.titles=[],this.charts_data=[];for(var C=0;C<E;C++)-1===h.indexOf(C)&&(this.titles.push(w[C]),this.charts_data.push(S[C]))}this.listenTo(this.model,"change:dataSets",this._updateVisibility)},_updateVisibility:function(){var e=this.model.get("dataSets"),t=this.$el.find(".moveable.chart"),n=this.$el.find(".moveable.particle");t.each(function(t,a){-1!==e.indexOf(t)?(i(a).removeClass("hidden"),i(n[t]).removeClass("hidden"),-1===this.rendered.indexOf(t)&&this.renderChart(t)):(i(a).addClass("hidden"),i(n[t]).addClass("hidden"))}.bind(this))},_createTitle:function(t,n){return e.get(t,"value")&&(t=t.value),{contents:t,sheetIndex:n}},initChart:function(){var e=this.titles.length;if(e>0)for(var t=0;t<e;t++)this.renderChart(t,this.titles[t].sheetIndex);else this.renderChart(0)},getData:function(){var e,t,n,i,a=this.model.get("custom"),r=(null===(t=this.options.liveData)||void 0===t?void 0:null===(n=t[null===(e=a.live)||void 0===e?void 0:e.key])||void 0===n?void 0:n.data)||this.model.get("data");if(null==a?void 0:null===(i=a.live)||void 0===i?void 0:i.enabled){var o,l=null==a?void 0:null===(o=a.live)||void 0===o?void 0:o.sheetSelected;if(l>-1)return[r[l]]}return r},renderChart:function(e,t){if(e=e||0,this.charts_data.length){var n=this.model,i=this.animate,a=this.infographic,l=this.options,s=a.get("theme"),c=this.getData(),u="".concat(n.get("chart_id"),"_").concat(e),d=document.getElementById("Chart_".concat(u));r.default.create({container:d,chart:n,theme:s,id:u,data:c,sheetIndex:t,animate:i,viewMode:l.viewMode,assets:l.assets}).then((function(e){Object(o.addEntity)(n.get("chart_id"),e)})),this.rendered.push(e)}},prepare:function(){var t=this.model.get("chart_id");this.el.id="CHART_"+t;var n={id:t,titles:this.titles,showTitles:this.showTitles,charts_data:this.charts_data};return e.template(this.template)(n)}})}.call(this,n("LvDl"),n("+hRF"))},K6OD:function(e,t,n){"use strict";n.r(t),function(e){var i=n("CKCE"),a=n("nVTQ");t.default=a.default.extend({template:i.default,render:function(){var t=this.model.get("text").split("/").pop(),n={};return/youtube/.test(this.model.get("text"))?n.url="//youtu.be/"+t:n.url="//vimeo.com/"+t,this.$el.css({"padding-bottom":0,height:"60px"}),this.$el.html(e.template(this.template)(n)),this}})}.call(this,n("LvDl"))},LTYX:function(e,t,n){"use strict";n.r(t),function(e){var i=n("sCQ0"),a=n("Zcty"),r=n("PVeW");var o={collectElements:function(e){a.default.dispatch({type:i.default.COLLECT_ELEMENTS,infographic:e})},setElementVisible:function(e,t){a.default.dispatch({type:i.default.SET_ELEMENT_VISIBLE,elementId:e,visible:t}),Object(r.default)()},setElementChildVisible:function(e,t,n){a.default.dispatch({type:i.default.SET_ELEMENT_CHILD_VISIBLE,elementId:e,index:parseInt(t),visible:n}),Object(r.default)()},toggleAllElementVisibility:function(e){a.default.dispatch({type:i.default.TOGGLE_ALL_ELEMENTS_VISIBLE,visible:e}),Object(r.default)()},revealSelectionFrame:function(e,t,n,r){a.default.dispatch({type:i.default.REVEAL_SELECTION_FRAME,objectId:e,objectType:t,childIndex:n,position:r})},hideSelectionFrame:function(){a.default.dispatch({type:i.default.HIDE_SELECTION_FRAME})},setScrollPosition:function(t){var n=e.extend({type:i.default.SET_SCROLL_POSITION},t);a.default.dispatch(n)}};t.default=o}.call(this,n("LvDl"))},OHxV:function(e,t,n){"use strict";n.r(t),t.default='<img src="<%= image %>" class="video">\n<% if (media_type === \'youtube\') { %>\n    <img src="/i/media/youtube_play.png" class="youtube-play-icon play-icon">\n<% } else if (media_type === \'vimeo\') { %>\n    <img src="/i/media/vimeo_play.png?2" class="vimeo-play-icon play-icon">\n<% } %>\n'},Wbv4:function(e,t,n){"use strict";n.r(t);var i=n("17x9"),a=n.n(i),r=n("q1tI"),o=n.n(r),l=n("TSYQ"),s=n.n(l),c=n("URb8"),u=n.n(c);function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?d(e):t}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=m(e);if(t){var a=m(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return v(this,n)}}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(r,e);var t,n,i,a=y(r);function r(){var e;return f(this,r),p(d(e=a.apply(this,arguments)),"_handleMouseLeave",(function(){e.props.onLeave&&e.props.onLeave()})),e}return t=r,(n=[{key:"render",value:function(){var e=this.props.position;return(o.a.createElement("div",{className:s()(u.a.elementDecorator,this.props.className,p({},u.a.__visible,this.props.visible)),onMouseLeave:this._handleMouseLeave,style:e},this.props.children))}}])&&h(t.prototype,n),i&&h(t,i),r}(o.a.Component);p(_,"displayName","SelectionFrame"),p(_,"propTypes",{children:a.a.oneOfType([a.a.arrayOf(a.a.element),a.a.element]),onLeave:a.a.func,position:a.a.shape({top:a.a.number.isRequired,left:a.a.number.isRequired,width:a.a.number.isRequired,height:a.a.number.isRequired}).isRequired,visible:a.a.bool.isRequired,className:a.a.string}),t.default=_},cBn6:function(e,t,n){"use strict";n.r(t),function(e){var i=n("q1tI"),a=n.n(i),r=n("JPcv"),o=n("/MKj"),l=n("TSYQ"),s=n.n(l),c=n("iOMl"),u=n("URb8"),d=n.n(u),f=n("80VO"),h=n.n(f),p=n("ySsV"),m=n("sMVN"),v=n("SvMf"),g=n("SsOH"),b=n("PFCD"),y=n("46Ur"),_=n("bSnT"),O=n("LTYX"),w=n("BlEU"),E=n("0GyG"),S=n("Zdat"),C=n("r87f"),L=n("Wbv4"),x=n("44p9"),T=n("NARt"),k=n("qV6p"),F=n("GlmT"),j=n("Zcty"),I=n("rQKZ");function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e,t,n,i,a,r,o){try{var l=e[r](o),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(i,a)}function P(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?D(e):t}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=M(e);if(t){var a=M(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return N(this,n)}}var q=function(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(o=(r<3?a(o):r>3?a(t,n,o):a(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},z=function(e,t){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},K=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},U=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(u,t);var n,i,o,l=B(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),R(D(t=l.call(this,e)),"_returnToProject",(function(){return window.app.router.navigate("#/edit/".concat(t.state.infographicId))})),t._handleOutlineStoreChange=t._handleOutlineStoreChange.bind(D(t)),t._handleSelectionFrameStoreChange=t._handleSelectionFrameStoreChange.bind(D(t)),t._handleSelectionFrameDownloadClick=t._handleSelectionFrameDownloadClick.bind(D(t)),t._revealSelectionFrame=t._revealSelectionFrame.bind(D(t)),t.state={hiddenElements:Object(r.fromJS)(v.default.readHiddenElements()),outlineVisible:v.default.isOutlineVisible()},t}return n=u,o=[{key:"getStores",value:function(){return[p.default,m.default,b.default,y.default]}},{key:"calculateState",value:function(){return{infographicModel:p.default.model,infographicId:p.default.infographicId,modelIsLoading:p.default.isLoading,canDownload:b.default.canDownload,transparentBackground:m.default.get("transparentBackground")&&_.TYPES_WITH_TRANSPARENCY.includes(y.default.activeTab)}}}],(i=[{key:"render",value:function(){var e,t=this,n=this.state,i=n.transparentBackground,r=n.selectionFrameVisible,o=n.selectionFramePosition,l=n.outlineVisible,c=i,u=s()(h.a.responsiveContainer,R({},h.a.__transparentBackground,c));void 0!==r&&l&&(e=a.a.createElement(L.default,{onLeave:O.default.hideSelectionFrame,position:o,visible:r},a.a.createElement("div",{className:d.a.elementToolbar},a.a.createElement("a",{className:d.a.downloadIcon,href:"",onClick:this._handleSelectionFrameDownloadClick}))));var f=l?a.a.createElement(C.default,null):null;return(a.a.createElement(S.default,{leftSidebar:f,ref:function(e){t._viewport=e},viewportWidth:void 0,viewportHeight:void 0,goBackToProject:this._returnToProject},a.a.createElement("div",{className:u,style:{},ref:function(e){t._viewportNode=e}},a.a.createElement("div",{ref:function(e){t._containerNode=e},style:{},className:h.a.responsiveContainerContents})),this.state.canDownload&&e))}},{key:"componentDidMount",value:function(){j.default.dispatch({type:F.LOAD_LIVE_DATA_ONCE}),this._updateContainerOffset();var e=this.state,t=e.modelIsLoading,n=e.infographicModel;v.default.addListener(this._handleOutlineStoreChange),g.default.addListener(this._handleSelectionFrameStoreChange),t||this._renderInfographic(n)}},{key:"componentWillUnmount",value:function(){this._clearInfographic(),g.default.removeListener(this._handleSelectionFrameStoreChange),v.default.removeListener(this._handleOutlineStoreChange)}},{key:"componentDidUpdate",value:function(e,t){var n=this,i=this.state,a=i.modelIsLoading,o=i.infographicModel,l=i.hiddenElements,s=i.outlineVisible;if(!a){var c=Promise.resolve();o===t.infographicModel&&e.liveData===this.props.liveData||(c=this._renderInfographic(o)),s===t.outlineVisible&&Object(r.is)(l,t.hiddenElements)||c.then((function(){n._currentView.setVisibilityOutline(v.default.getElements().toJS()),Object(w.default)(n._currentView.el.offsetHeight)})),function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];var o=!0,l=!1,s=void 0;try{for(var c,u=i[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value;if(!Object(r.is)(e[d],t[d]))return!0}}catch(e){l=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(l)throw s}}return!1}(this.state,t,"displayPaper","paperWidth","paperHeight","paperZoomRatio")&&this._updateContainerOffset()}}},{key:"_renderInfographic",value:function(t){var n,i,a=this,r=new c.default(e.extend(!0,{},t.attributes));if(this._renderPromise)this._renderPromise.then((function(){a._renderInfographic(r)}));else{var o=this;this._renderPromise=new Promise((n=function(e){var t,n;return z(this,(function(i){switch(i.label){case 0:return o._clearInfographic(),[4,Object(T.default)(r)];case 1:return i.sent(),(t=document.createElement("div")).style.display="inline-block",o._containerNode.appendChild(t),n=new x.default({model:r,container:t,edit:!1,viewMode:"download",liveData:o.props.liveData}),o._currentView=n,n.render((function(){var i=n.el;Object(w.default)(i.offsetHeight),o._listenToInfographicHoverEvents(),t.parentNode.removeChild(t),requestAnimationFrame((function(){o._containerNode.appendChild(t),e()}))})),o._currentView.setVisibilityOutline(v.default.getElements().toJS()),[2]}}))},i=function(){var e=this,t=arguments;return new Promise((function(i,a){var r=n.apply(e,t);function o(e){V(r,i,a,o,l,"next",e)}function l(e){V(r,i,a,o,l,"throw",e)}o(void 0)}))},function(e){return i.apply(this,arguments)})).then((function(){a._renderPromise=null}))}return this._renderPromise}},{key:"_handleOutlineStoreChange",value:function(){this.setState({hiddenElements:Object(r.fromJS)(v.default.readHiddenElements()),outlineVisible:v.default.isOutlineVisible()})}},{key:"_handleSelectionFrameStoreChange",value:function(){this.setState({selectionFrameVisible:g.default.isFrameVisible(),selectionFramePosition:g.default.getFramePosition()})}},{key:"_handleSelectionFrameDownloadClick",value:function(e){e.preventDefault(),Object(E.downloadSingleObject)()}},{key:"_listenToInfographicHoverEvents",value:function(){this._infographicElements=Array.from(this._containerNode.querySelectorAll(".moveable:not(.ig-theme-group-chart):not(.table-caption), .igc-chart.inner, .moveable > .map"));var e=!0,t=!1,n=void 0;try{for(var i,a=this._infographicElements[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var r=i.value;r.classList.contains("chart-title")&&r.parentNode.classList.contains("chartcontainer")||r.addEventListener("mouseenter",this._revealSelectionFrame,!1)}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}},{key:"_revealSelectionFrame",value:function(e){var t=this.state.displayPaper,n=e.currentTarget,i=function(e){var t,n={};if(e.classList.contains("map")?t=".map":e.classList.contains("chart")?t=".moveable.chart":e.classList.contains("igc-chart")&&(t=".igc-chart.inner"),t){var i=e.parentNode.querySelectorAll(t);n.childIndex=k.default.elementIndexInNodeList(e,i),n.objectType="chart"}else e.classList.contains("media")?n.objectType="media":n.objectType="particle";var a=k.default.findAncestorWithClassName(e,"moveable_w");return a?(n.objectId=a.getAttribute("data-object-id"),n):null}(n);if(i){var a=n.getBoundingClientRect(),r=window.scrollY,o=i.objectId,l=i.objectType,s=i.childIndex,c=r+a.top-this._containerOffsetTop;t&&(c+=30),O.default.revealSelectionFrame(o,l,s,{top:c,left:a.left-this._containerOffsetLeft+this._viewport.scrollLeft,width:a.width,height:a.height})}}},{key:"_clearInfographic",value:function(){if(this._infographicElements){var e=!0,t=!1,n=void 0;try{for(var i,a=this._infographicElements[Symbol.iterator]();!(e=(i=a.next()).done);e=!0)i.value.removeEventListener("mouseenter",this._revealSelectionFrame,!1)}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}this._infographicElements=null}this._currentView&&(this._currentView.remove(),this._currentView=null)}},{key:"_updateContainerOffset",value:function(){var e=this._viewportNode.getBoundingClientRect();this._containerOffsetTop=e.top+window.scrollY,this._containerOffsetLeft=e.left}}])&&P(n.prototype,i),o&&P(n,o),u}(i.Component);U=q([Object(o.connect)((function(e){return{liveData:e.get("liveData")}})),Object(I.default)(),K("design:type",Function),K("design:paramtypes",[void 0])],U),t.default=U}.call(this,n("+hRF"))},iqBm:function(e,t,n){"use strict";n.r(t),t.default='<% _.each(charts_data, function(data, idx) { %>\n<% if (showTitles) { %>\n<h2 class="moveable particle chart-title" style="margin-right:0px; margin-bottom:17px; margin-left:0px;"><div class="bodytitle"><div class="innertext"><%- titles[idx].contents %></div></div></h2>\n<% } %>\n<div class="moveable chart" id="chart_<%= id %>_<%= idx %>">\n  <div id="Chart_<%= id %>_<%= idx %>" class="inner"></div>\n</div>\n<% }); %>\n'},r87f:function(e,t,n){"use strict";n.r(t);var i=n("XzT5"),a=n("q1tI"),r=n.n(a),o=n("TSYQ"),l=n.n(o),s=n("LTYX"),c=n("SvMf"),u=n("FjIY"),d=n("OCsq"),f=n("/Wf7"),h=n.n(f);function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?p(e):t}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=b(e);if(t){var a=b(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return y(this,n)}}function E(){return{elements:c.default.getElements(),selectAllChecked:c.default.allElementsChecked(),selectAllType:c.default.getAllCheckedType()}}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(f,e);var t,n,a,o=w(f);function f(){var e;return m(this,f),g(p(e=o.apply(this,arguments)),"state",E()),g(p(e),"_handleStoreChange",(function(){e.setState(E())})),g(p(e),"_handleElementCheckboxChange",(function(e){var t=e.target,n=t.getAttribute("data-element-id");s.default.setElementVisible(n,t.checked)})),g(p(e),"_handleChildCheckboxChange",(function(e){var t=e.target,n=t.getAttribute("data-element-id"),i=t.getAttribute("data-index");s.default.setElementChildVisible(n,i,t.checked)})),g(p(e),"_handleSelectAllChange",(function(e){var t=e.target;s.default.toggleAllElementVisibility(t.checked)})),e}return t=f,(n=[{key:"render",value:function(){var e=this.state,t=e.elements;return r.a.createElement(d.default,{title:i.default.t("app.download.outline_title"),selectAllChecked:e.selectAllChecked,selectAllType:e.selectAllType,onSelectAllChange:this._handleSelectAllChange},r.a.createElement("ul",{className:h.a.outlineList},t.map(function(e){var t,n=e.get("id"),i=e.get("children");!i.isEmpty()&&(t=r.a.createElement("ul",{className:l()(h.a.outlineList,h.a.__inner)},i.map(function(e,t){var i="outline-subitem-"+n+"-"+t;return(r.a.createElement("li",{className:h.a.outlineListItem,key:n+"-"+t},r.a.createElement(u.default,{checked:e.get("checked"),customCss:"vertical-align: middle","data-index":t,"data-element-id":n,disabled:e.get("disabled"),id:i,onChange:this._handleChildCheckboxChange,type:"check"}),r.a.createElement("label",{className:h.a.outlineLabel,htmlFor:i},e.get("title"))))}.bind(this))));var a="outline-item-"+n,o=[h.a.outlineListItem];return r.a.createElement("li",{className:o.join(" "),key:e.get("id")},r.a.createElement(u.default,{checked:e.get("checked"),customCss:"vertical-align: middle","data-element-id":n,id:a,onChange:this._handleElementCheckboxChange,type:e.get("checkType")}),r.a.createElement("label",{className:h.a.outlineLabel,htmlFor:a,title:e.get("title")},e.get("title")),t)}.bind(this))))}},{key:"componentDidMount",value:function(){c.default.addListener(this._handleStoreChange)}},{key:"componentWillUnmount",value:function(){c.default.removeListener(this._handleStoreChange)}}])&&v(t.prototype,n),a&&v(t,a),f}(r.a.Component);g(S,"displayName","Outline"),t.default=S},wQZe:function(e,t,n){(t=e.exports=n("I1BE")(!1)).push([e.i,'._1mollFj5y9e4FDgS_04kFf._2sMyDpTBdBXk1FBPRkYPCr .ig-container {\n    background: transparent url("/i/chessboard-tile.jpg") repeat;\n}\n._1mollFj5y9e4FDgS_04kFf {\n    transform-origin: 0 0;\n}\n._1mollFj5y9e4FDgS_04kFf .ig-container {\n    top: 30px !important;\n}\n.LMMMrwozs1HN64EoqC-PW {\n    transform-origin: 50% 0;\n}\n',""]),t.locals={responsiveContainer:"_1mollFj5y9e4FDgS_04kFf",__transparentBackground:"_2sMyDpTBdBXk1FBPRkYPCr",responsiveContainerContents:"LMMMrwozs1HN64EoqC-PW"}}}]);