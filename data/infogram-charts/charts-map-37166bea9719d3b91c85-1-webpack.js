(window.webpackJsonp=window.webpackJsonp||[]).push([["infogram-charts/charts-map"],{"22+b":function(e,t,a){"use strict";a.r(t),t.default='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="8" height="8" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M160 512l-160 0 0-160 64 0 0 96 96 0z m352-160l0 160-160 0 0-64 96 0 0-96z m-160-352l160 0 0 160-64 0 0-96-96 0z m-352 160l0-160 160 0 0 64-96 0 0 96z" fill="#fff"/></svg>\n'},"7s9I":function(e,t,a){"use strict";a.r(t);var r=a("LvDl"),o=a.n(r),i=a("CEqV"),n=a("VTJc"),l=a("6jAQ"),s=a("0Qba"),_=a("XKSt"),c=a("wZn9"),u=a("s9+M"),d=Object.create(l.default);t.default=d;var p=["edit","capture","download","thumbnail"];(function(){this.instanceClass=i.Map,this.setupChartOptionsDimensions=function(){var e=this.custom,t=this.chartOptions,a=this.viewMode;o.a.get(e,"height")&&(t.height=parseInt(e.height,10),t.fixedHeight=!0),t.editable="edit"===a},this.setupChartSheetOptionsItem=function(e){var t,a,r,i,l,d,m,f,h,g=s.default.shapes,v=e.heatmap,y=e.points,b=e.osm,E=this.charts,O=this.viewMode,P=this.custom.map_json,D=(null===this||void 0===this?void 0:null===(t=this.charts)||void 0===t?void 0:null===(a=t.map)||void 0===a?void 0:a.labels)||{};D.regionNames&&(D.regionNames=Object(_.toKebabCase)(D.regionNames));var M,T,w,x,C,I,L=o.a.merge([],this.themeColors,e.colors||this.colors),A={};for(var k in e.groupedColors)try{A[decodeURIComponent(k)]=e.groupedColors[k]}catch(t){A[k]=e.groupedColors[k]}if(P.corrections&&b){var R=!0,S=!1,B=void 0;try{for(var U,W=P.features[Symbol.iterator]();!(R=(U=W.next()).done);R=!0){var K=U.value;K.geometry.coordinatesOriginal&&(K.geometry.coordinates=K.geometry.coordinatesOriginal)}}catch(e){S=!0,B=e}finally{try{R||null==W.return||W.return()}finally{if(S)throw B}}}var j,z,N,q,H={axis:[{},{}],legend:{align:o.a.get(e,"labels.legend.align",o.a.get(this,"charts.legend.align","top")),enabled:e.showLegend,position:o.a.get(e,"labels.legend.position",o.a.get(this,"charts.legend.position","bottom")),showValues:o.a.get(e,"showLegendValues",!0),sort:e.sort||"auto"},series:{heatmap:{enabled:v},points:{enabled:y},timeline:e.timeline,groupedData:e.groupedData,groupedColors:A,map_json:P,doubleClickZoom:-1===p.indexOf(O),preferCanvas:"capture"!==O,autoZoom:e.autoZoom,hideBlanks:!y&&e.hideBlanks,latLon:e.latLon,localisation:e.localisation,osm:Object(n.getTileLayer)(e.osm,null===(r=this.charts)||void 0===r?void 0:null===(i=r.map)||void 0===i?void 0:i.osm),showZoom:e.showZoom,mobileInteractivityHint:e.mobileInteractivityHint,showLabels:e.showNames,zoomDelta:null!==(M=null===this||void 0===this?void 0:null===(l=this.charts)||void 0===l?void 0:null===(d=l.map)||void 0===d?void 0:d.zoomDelta)&&void 0!==M?M:.2},style:{colors:L,inactive:e.inactive||(null===(m=E.map)||void 0===m?void 0:m.countryFill)||"#eeeeee",labels:o.a.merge({},D,e.labels),strokeColor:e.polygonStrokeColor||o.a.get(E,"map.polygonStrokeColor","#ffffff"),smoothFactor:"capture"===O?.1:.2,mapFeatureOpacity:(null!==(w=null!==(T=e.mapFeatureOpacity)&&void 0!==T?T:P.featureOpacity)&&void 0!==w?w:b?50:100)/100,markerOpacity:(null!==(x=null==e?void 0:e.markerOpacity)&&void 0!==x?x:100)/100,strokeOpacity:(null!==(C=null==e?void 0:e.strokeOpacity)&&void 0!==C?C:100)/100,strokeWidth:e.mapItemStrokeWidth,tileLayerTransparency:(null!==(I=e.tileLayerTransparency)&&void 0!==I?I:100)/100},tooltip:{showValue:o.a.get(e,"showValue",!0),showGroupNames:o.a.get(e,"showGroupNames",o.a.get(E,"map.showGroupNames",!0))},view:e.view};v&&(H.series.heatmap=o.a.merge(H.series.heatmap,{coldColor:e.coldColor||(null===(j=E.map)||void 0===j?void 0:j.coldColor)||H.style.inactive,hotColor:e.hotColor||(null===(z=E.map)||void 0===z?void 0:z.hotColor)||L[0],hotText:(null===(N=e.hotText)||void 0===N?void 0:N.toString())||"",coldText:(null===(q=e.coldText)||void 0===q?void 0:q.toString())||"",legendTitle:e.legendTitle,heatmapEntries:e.heatmap_entries}));if(y){var F=g[e.path]||g.circlePath;F.verticalOffset=o.a.get(F,"dimensions.stickToBottom")?-1:-.5,H.series.points=o.a.merge(H.series.points,{shape:F,pointSizemax:e.pointSizemax||30,pointSizemin:o.a.get(e,"pointSizemin",5),clusterSize:e.clusterSize||0})}if(null===(f=H.series)||void 0===f?void 0:null===(h=f.timeline)||void 0===h?void 0:h.enabled){var V,G,Z,Y,J,X;H.series.timeline.dataInputFormat=(null==e?void 0:null===(V=e.dataInputFormat)||void 0===V?void 0:V.date)||"%Y-%m-%d",H.series.timeline.dataOutputFormat=null!==(X=null==e?void 0:null===(G=e.labels)||void 0===G?void 0:null===(Z=G.axis)||void 0===Z?void 0:null===(Y=Z.x)||void 0===Y?void 0:null===(J=Y.tick)||void 0===J?void 0:J.timeFormat)&&void 0!==X?X:H.series.timeline.dataInputFormat,"auto"===H.series.timeline.dataOutputFormat&&(H.series.timeline.dataOutputFormat=H.series.timeline.dataInputFormat)}return Number.isFinite(e.xmin)&&Number.isFinite(e.xmax)&&e.xmin!==e.xmax&&(H.series.limits=[e.xmin,e.xmax]),Object(c.assignAxisTickInterval)(H,e),Object(c.assignAxisTicks)(H,e),Object(u.assignNumberFormatValues)({sheetOptions:H,custom:e,axis:[{id:"x",path:""},{id:"x1",path:"axis.x"}],inputDecimalSeparator:this.inputDecimalSeparator}),Object(u.assignNumberFormatLabels)({sheetOptions:H,custom:e,affixes:[{id:"x",path:""},{id:"label",path:""}],inputDecimalSeparator:this.inputDecimalSeparator}),H}}).call(d)},CEqV:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Map",(function(){return Map}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("LvDl"),lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__),parse_decimal_number__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("qJBq"),parse_decimal_number__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(parse_decimal_number__WEBPACK_IMPORTED_MODULE_1__),d3_color__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("SC+/"),d3_selection__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("/TIM"),d3_interpolate__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("pD2Y"),d3_scale__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("ziQ1"),d3_polygon__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("tUiF"),d3_dispatch__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("30U6"),d3_array__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("vBe5"),d3_time_format__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("cOGN"),polylabel__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("mYRP"),polylabel__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(polylabel__WEBPACK_IMPORTED_MODULE_10__),hammerjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("yLV6"),hammerjs__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(hammerjs__WEBPACK_IMPORTED_MODULE_11__),moment__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("wd/R"),moment__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_12__),_chart__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("LWvD"),_controls_index__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("VLlq"),_legend__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("x5YE"),_misc__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("3y/1"),_tooltip__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("XKI8"),_DownloadButton__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("pYxU"),_Disclaimer__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("JR+o"),_helpers_animation__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("v3rV"),_elements__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("BGfC"),_helpers_format__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("x+1q"),_BarRace_controls__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__("73+k");function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _get(e,t,a){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=_superPropBase(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(a):o.value}})(e,t,a||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _iterableToArrayLimit(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,o,i=[],n=!0,l=!1;try{for(a=a.call(e);!(n=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(e){l=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(l)throw o}}return i}}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},r=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),r.forEach((function(t){_defineProperty(e,t,a[t])}))}return e}function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _objectSpreadProps(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}var _typeof=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var a,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;a=Reflect.construct(r,arguments,o)}else a=r.apply(this,arguments);return _possibleConstructorReturn(this,a)}}var NONDIGITCHARACTERS=["$","%","£","€","<",">"],MINHEIGHT=50,DEFAULT_ANIMATION_LENGTH=5,FRAMES_PER_SECOND=50,DEFAULT_STAY_LENGTH=1,zoomInterval;function getBounds(e){return e.reduce((function(e,t){if(!t.mapItem)return e;var a=t.mapItem.getBounds();return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isEmpty(a)?e:e?(e._southWest.lat=Math.min(e._southWest.lat,a._southWest.lat),e._southWest.lon=Math.min(e._southWest.lon,a._southWest.lon),e._northEast.lat=Math.max(e._northEast.lat,a._northEast.lat),e._northEast.lon=Math.max(e._northEast.lon,a._northEast.lon),e):a}),null)}function labelRenderer(e){var t=e.data,a=e.style;return function(e){e.styles({bottom:0,right:0,position:"absolute",textAlign:"right"}).styles(a).style("z-index",2).text(t)}}var getOpacity=function(e,t){return e?t:t/5};function attachLegendEvents(e,t){var a=e.runtime,r=e.container,o=a.sheet,i=o.series.points,n=o.style.mapFeatureOpacity,l=Object(d3_dispatch__WEBPACK_IMPORTED_MODULE_7__.dispatch)("legendClick","highlightStart","highlightEnd"),s=!0,_=[];l.on("highlightStart",(function(t){var a=e.map;s&&(i.enabled?Object(d3_selection__WEBPACK_IMPORTED_MODULE_3__.select)(a._container).selectAll(".leaflet-interactive").classed("__disabled",(function(){return!this.classList.contains("group_"+t)&&!this.classList.contains("group_-1")})):a.eachLayer((function(e){if(e.feature&&-1!==e.feature.groupId){var a=getOpacity(t===e.feature.groupId,n);e.setStyle({fillOpacity:a})}})))})),l.on("legendClick",(function(a){var o=e.map,l=e.legendData;(s?(s=!1,_.push(a)):1===_.length&&_[0]===a?(s=!0,_=[]):_.includes(a)?_.splice(_.indexOf(a),1):(_.push(a),_.length===l.length&&(s=!0,_=[])),i.enabled)?Object(d3_selection__WEBPACK_IMPORTED_MODULE_3__.select)(o._container).selectAll(".leaflet-interactive").classed("__disabled",(function(){var e=this,t=!s;return _.forEach((function(a){(s||e.classList.contains("group_-1")||e.classList.contains("group_".concat(a)))&&(t=!1)})),t})):o.eachLayer((function(e){if(e.feature&&-1!==e.feature.groupId){var t=_.includes(e.feature.groupId)||s,a=getOpacity(t,n);e.feature.properties.disabled=!t,e.setStyle({fillOpacity:a})}}));l.forEach((function(e,t){e.active=s||_.includes(t)})),t.data(l),r.selectAll(".igc-legend-ico").style("background-color",(function(e){return e.active?e.color:"rgba(63, 61, 56, 0.2)"}))})),l.on("highlightEnd",(function(){if(s){var t=e.map;if(i.enabled)Object(d3_selection__WEBPACK_IMPORTED_MODULE_3__.select)(t._container).selectAll(".leaflet-interactive").classed("__disabled",!1);else t.eachLayer((function(e){var t;e.feature&&-1!==(null===(t=e.feature.properties)||void 0===t?void 0:t.groupId)&&e.setStyle({fillOpacity:n})}))}})),t.addListener({id:e.chartId,dispatch:l})}var attribution=function(e,t){var a='Map tiles by <a href="http://stamen.com">Stamen Design</a>,\n            under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>,\n            under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.',r='Map tiles by <a href="http://stamen.com">Stamen Design</a>,\n            under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>,\n            under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',o="Map tiles by Carto, under CC BY 3.0. Data by OpenStreetMap, under ODbL.",i={"https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png":"Map tiles: Wikimedia Maps","https://c.tile.stamen.com/watercolor/{z}/{x}/{y}.png":a,"https://b.tile.stamen.com/toner/{z}/{x}/{y}.png":r,"http://c.tile.stamen.com/watercolor/{z}/{x}/{y}.png":a,"http://b.tile.stamen.com/toner/{z}/{x}/{y}.png":r,"https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png":a,"https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png":a,"https://stamen-tiles.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png":a,"https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png":a,"http://a.basemaps.cartocdn.com/light_all/${z}/{x}/{y}.png":o,"http://a.basemaps.cartocdn.com/dark_all/${z}/{x}/{y}.png":o,"https://a.basemaps.cartocdn.com/light_all/${z}/{x}/{y}.png":o,"https://a.basemaps.cartocdn.com/dark_all/${z}/{x}/{y}.png":o,"https://cartocdn_{s}.global.ssl.fastly.net/base-dark/{z}/{x}/{y}.png":o,"https://cartocdn_{s}.global.ssl.fastly.net/base-light/{z}/{x}/{y}.png":o,"https://a.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png":'Map tiles by <a href="https://www.openstreetmap.fr/mentions-legales/">OpenStreetMap France</a>,\n            under <a href="https://creativecommons.org/licenses/by-sa/2.0/deed.fr">CC BY SA</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>,\n            under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.'}[e]||"Map data by OpenStreetMap, under ODbL.";return t&&(i=i?t+" | "+i:t),'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> | '.concat(i)};function calculateHeightResponsive(e,t,a,r){if(!t)return e;var o,i;if(a)i=t[1][0]-t[0][0],o=t[1][1]-t[0][1];else{var n=[r.latLng(t[0][0],t[0][1]),r.latLng(t[0][0],t[1][1]),r.latLng(t[1][0],t[0][1]),r.latLng(t[1][0],t[1][1])];o=n[0].distanceTo(n[1]),(i=n[0].distanceTo(n[2]))/(o=(o+n[2].distanceTo(n[3]))/2)>5&&(i=.75*o)}return e*Math.min(i/o,1.5)}var fixMovedLocations=function fixMovedLocations(point,transformations,getBounds){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=transformations[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var transformation=_step.value,entry={long:point.coordinates[1],lat:point.coordinates[0]};if(getBounds(transformation.bounds).contains([entry.long,entry.lat]))return"string"==typeof transformation.offset[0]?entry.long=eval(transformation.offset[0]):entry.long+=transformation.offset[0],"string"==typeof transformation.offset[1]?entry.lat=eval(transformation.offset[1]):entry.lat+=transformation.offset[1],point.coordinates=[entry.lat,entry.long],point}}catch(e){_didIteratorError=!0,_iteratorError=e}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return point},overlaps=function(e,t){return t.some((function(t){return rectOverlap(t,e)}))},rectOverlap=function(e,t){return(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.inRange(e.left,t.left,t.right)||lodash__WEBPACK_IMPORTED_MODULE_0___default.a.inRange(t.left,e.left,e.right))&&(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.inRange(e.top,t.top,t.bottom)||lodash__WEBPACK_IMPORTED_MODULE_0___default.a.inRange(t.top,e.top,e.bottom))},_ref;function labelHTML(e){var t=e.labelColor,a=e.darkColor,r=e.lightColor,o=e.fontFamily,i=Object(d3_color__WEBPACK_IMPORTED_MODULE_2__.hsl)(e.color).l<.4,n=e.regionName.toString().replace(/</g,"&lt;");if("-"!==n){var l="font-size: ".concat(e.fontSize,"; font-style: ").concat(e.fontStyle,"; font-weight: ").concat(e.fontWeight,"; word-break: keep-all;");if(o&&(l+="font-family: ".concat(o,";")),t){var s="0 1px 0.5px ".concat(t.stroke,", 0 1px 0.5px ").concat(t.stroke,", 0 1px 0.5px ").concat(t.stroke,", 0 1px 0.5px ").concat(t.stroke,", 0 1px 0.5px");l+="color: ".concat(t.fill,"; text-shadow: ").concat(s)}else a&&(l+="color: ".concat(i?a:r,"; text-shadow: none;"));return'<div class="igc-map-marker-label" data-index="'.concat(e.dataIndex,'" style="').concat(l,'">').concat(n,"</div>")}}var groupNumber=function(e,t){return null!==(_ref=null==t?void 0:t.findIndex((function(t){return t.title===e})))&&void 0!==_ref?_ref:-1},createGetEntryStyle=function(){return function(e){var t,a,r;return{fillColor:e.color||Object(_misc__WEBPACK_IMPORTED_MODULE_16__.getColor)(),color:e.stroke||"#ffffff",fillRule:"nonzero",fillOpacity:null!==(t=null==e?void 0:e.opacity)&&void 0!==t?t:1,opacity:null!==(a=null==e?void 0:e.strokeOpacity)&&void 0!==a?a:1,weight:null!==(r=null==e?void 0:e.weight)&&void 0!==r?r:1,link:e.link,dashArray:e.dashArray,className:"group_".concat(e.groupId," ")+(e.link?"igc-chart-link":"")}}};function prepareLegendData(e){var t=e.entries,a=e.sort,r=e.groupingSymbol,o=e.decimalSeparator,i=e.colors,n=t.map((function(e){return{color:i[e.id],title:e.label,active:!0}}));return"auto"!==a&&(n=sortData(n,"descending"===a,r,o)),n.map((function(e,t){return _objectSpreadProps(_objectSpread({},e),{groupId:t})}))}function sortData(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=a&&r?"".concat(a).concat(r):",.",i=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.sortBy(e,(function(e){return e.title})),n=!0;return i=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.sortBy(i,(function(e){var t=Date.parse(e.title);return(!t||lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(e.title,"length")<6)&&(n=!1),t||e.title})),n||(i=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.sortBy(i,(function(e){var t=e.title&&e.title.trim()||"",a=!1;"-"===t[0]&&(a=!0,t=t.substr(1)),-1!==(t=(t=(t=(t=t.replace("&lt;","<")).replace("&gt;",">")).replace(/–/g,"-")).replace("+","")).indexOf("-")&&(t=t.split("-")[0]),-1!==NONDIGITCHARACTERS.indexOf(t[0])&&(t=t.substr(1)),-1!==NONDIGITCHARACTERS.indexOf(t.slice(-1))&&(t=t.slice(0,-1)),a&&(t="-".concat(t));var r=parse_decimal_number__WEBPACK_IMPORTED_MODULE_1___default()(t,o);return r||0===r?r:t}))),t?i.reverse():i}function markerHTML(e,t,a){return'\n        <div\n            class="map-marker-container '.concat(e.link?"igc-chart-link":"",'"\n            style="opacity: ').concat(e.opacity,';"\n        >\n            <svg\n                version="1.1"\n                xmlns="http://www.w3.org/2000/svg"\n                width=').concat(e.width,"\n                height=").concat(e.height,'\n                viewBox="0 0 ').concat(e.dimensions.width," ").concat(e.dimensions.height,'"\n                class="igc-map-marker"\n            >\n                <path fill-rule="').concat(e.fillRule,'" class="igc-table-scaledpath" fill="').concat(e.color,'" d="').concat(e.path,'"/>\n            </svg>\n            ').concat(t?labelHTML(_objectSpread({},e,a)):"","\n        </div>")}function formattedValue(e,t){var a=t.tooltip.x.format(e);return"NaN"===a?e:a}function redrawHeatmap(e){var t=e.container,a=e.runtime,r=e.options,o=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(a,"sheet.legend.position");if(["left","right"].includes(o)){var i=a.height,n=t.select(".igc-legend"),l=n.select(".igc-heatmap-vertical-title-holder"),s=n.select(".igc-heatmap-scale-label-holder"),_=parseInt(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(r,"style.legend.font-size"),10),c=s.selectAll(".igc-heatmap-scale-label"),u=c.size()-1,d=i/u;c.style("top",(function(e,t){return"".concat(t===u?i-_:t*d-_*(0===t?0:.5),"px")})),l.style("width","".concat(i,"px")),n.style("height","".concat(i,"px"))}}function createHeatmapIndexer(e){var t=e.length;return function(a){for(var r=0,o=0;o<t;o++){var i=e[o];if(a<i)break;a>=i&&(r=o)}return r}}var Map=function(e){_inherits(a,e);var t=_createSuper(a);function a(e){var r;return _classCallCheck(this,a),_defineProperty(_assertThisInitialized(r=t.call(this,e,"div")),"addLayerMouseEvents",(function(e,t){var a=e.link,o=e.showTooltip;if(o||a){var i=_assertThisInitialized(r).tooltip;t.on({mouseover:function(){e.disabled&&!o||(o&&i().interaction("show"),a&&(t._map._container.style.cursor="pointer"))},mouseout:function(){o&&i().hide(),t._map._container.style.cursor=""}}),o&&t.on({mousemove:function(t){i().setText(e.text).setValue(e.displayValue).setPosition(Object(_misc__WEBPACK_IMPORTED_MODULE_16__.getMousePosition)(t.originalEvent),e.color)}}),a&&t.on({click:function(){return Object(_misc__WEBPACK_IMPORTED_MODULE_16__.openUrl)(a,r.interaction)}})}})),_defineProperty(_assertThisInitialized(r),"getMapDimensions",(function(){var e=_assertThisInitialized(r).map,t=[];return e.eachLayer((function(e){return t.push(e)})),t.filter((function(e){return!!e.getBounds})).map((function(t){var a=t.getBounds();try{var r=e.latLngToContainerPoint(a.getNorthWest()),o=e.latLngToContainerPoint(a.getSouthEast());return{left:r.x,top:r.y,right:o.x,bottom:o.y}}catch(e){return{}}})).reduce((function(e,t){return e.left=Math.min(e.left,t.left),e.top=Math.min(e.top,t.top),e.right=Math.max(e.right,t.right),e.bottom=Math.max(e.bottom,t.bottom),e}),{left:Number.MAX_VALUE,right:Number.MIN_VALUE,top:Number.MAX_VALUE,bottom:Number.MIN_VALUE})})),_defineProperty(_assertThisInitialized(r),"showAndHideTimelineObjects",(function(){for(var e=function(){var e=i.data[v];if(e.mapItem||!u.isSameOrAfter(e.start)||u.isSameOrAfter(e.end))if(e.mapItem&&(u.isAfter(e.end)||u.isBefore(e.start))){try{y=!0,h.removeLayer(e.mapItem),e.label&&h.removeLayer(e.label),delete e.label}catch(e){}delete e.mapItem}else e.start.isAfter(u)&&(g=!1);else{var t,_=o?e.groupId:groupNumber(e.label,m),c=!1===(null===(t=m.find((function(e){return e.groupId===_})))||void 0===t?void 0:t.active);a||o||!e.feature||(e.feature.groupId=_);var d=a?r.L.marker(e.coordinates,{riseOnHover:!0,icon:r.L.divIcon({className:"map-marker group_".concat(_).concat(c?" __disabled":""),html:markerHTML(e,l,f),iconSize:[0,0]}),clickable:!0,zIndexOffset:1e3,feature:e.feature}):r.L.geoJson(e.feature,{style:s,smoothFactor:n});!a&&l&&!c&&e.regionName&&d.bindTooltip(labelHTML(_objectSpreadProps(_objectSpread({},f),{regionName:e.regionName,color:e.color,dataIndex:v})),{permanent:!0,direction:"center",opacity:1}),d.addTo(h),r.addLayerMouseEvents.call(_assertThisInitialized(r),e,d),e.mapItem=d,y=!0}v++},t=r.runtime,a=t.isPointsMode,o=t.isHeatmap,i=t.graph,n=t.smoothFactor,l=t.shouldShowLabels,s=t.getEntryStyle,_=t.isTimeline,c=t.sheet,u=_?r.timeline.currentTime:r.runtime.startTime,d=i.data.length,p=_assertThisInitialized(r),m=p.legendData,f=p.labelStyle,h=p.map,g=!0,v=0,y=!1;g&&v<d;)e();if(!a&&l&&y&&r.updateLabels(),!a&&c.series.autoZoom){var b=getBounds(i.data)||c.series.map_json.view;b&&h.fitBounds(b)}})),_defineProperty(_assertThisInitialized(r),"pause",(function(){clearInterval(r.timeline.timer),r.map.player.setPlaying(!1)})),_defineProperty(_assertThisInitialized(r),"play",(function(){var e=r.timeline;e.timePassed>=e.duration&&(r.timeline.currentTime=r.timeline.startTime.clone(),r.timeline.timePassed=0),r.timeline.timer&&clearInterval(r.timeline.timer),r.timeline.timer=setInterval(r.cycle,20)})),_defineProperty(_assertThisInitialized(r),"cycle",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=r.map.player,a=r.timeline,o=a.step,i=a.duration,n=a.currentTime;e||(r.timeline.timePassed+=o,r.timeline.currentTime.add(o,"ms"),t.setValue(r.timeline.timePassed/i*100)),r.labelPlaceholder.text(r.runtime.parse(n.toDate())),r.showAndHideTimelineObjects(),r.timeline.currentTime.isSameOrAfter(r.timeline.endTime)&&r.pause()})),_defineProperty(_assertThisInitialized(r),"setupLabelStyle",(function(e){var t,a,o,i=e.style,n=r.getSheetData();return"manual"===lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(i,"graph.item.value.color.method")?t={fill:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(i,"graph.item.value.color.manual.fill"),stroke:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(i,"graph.item.value.color.manual.stroke")}:"contrast"===lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(i,"graph.item.value.color.method")&&(a=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(i,"graph.item.value.color.contrast.light"),o=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(i,"graph.item.value.color.contrast.dark")),{fontFamily:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(n,"style.labels.regionNames.font-family"),fontSize:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(i,"regionNames.font-size","11px"),fontStyle:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(i,"regionNames.font-style","normal"),fontWeight:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(i,"regionNames.font-weight","400"),labelColor:t,darkColor:a,lightColor:o,visibility:r.runtime.isPointsMode?"visible":"hidden"}})),_defineProperty(_assertThisInitialized(r),"hideLabels",(function(){var e=_assertThisInitialized(r).map;if(r.previousCenterLocation){var t=e.latLngToContainerPoint(r.centerOrigin);r.coordinateOffset={x:r.previousCenterLocation.x-t.x+r.coordinateOffset.x,y:r.previousCenterLocation.y-t.y+r.coordinateOffset.y}}else r.coordinateOffset={x:0,y:0};e.eachLayer((function(e){var t,a=null===(t=e.getTooltip())||void 0===t?void 0:t._container;a&&(a.style.visibility="hidden")}))})),r.events=Object(d3_dispatch__WEBPACK_IMPORTED_MODULE_7__.dispatch)("startAnimation","endAnimation","tabChanged","downloadData","interaction","storePosition","updateViewbox"),r.interaction=r.createInteractionCaller(),r.tooltip=_tooltip__WEBPACK_IMPORTED_MODULE_17__.getTooltip,r}return _createClass(a,[{key:"interactionHint",value:function(){var e,t,a=this.chartId,r=this.options;this.touchDevice&&(e=280,t=this.interactivityHintText);var o=Object(_elements__WEBPACK_IMPORTED_MODULE_21__.Hint)().chartId(a).style(r.style.hint).width(e).text(t);Object(d3_selection__WEBPACK_IMPORTED_MODULE_3__.select)(r.container).call(o)}},{key:"render",value:function(){var e=this;Promise.all([Promise.all([__webpack_require__.e("vendors~additionalCharts"),__webpack_require__.e("additionalCharts")]).then(__webpack_require__.t.bind(null,"4R65",7)),Promise.all([__webpack_require__.e("vendors~additionalCharts"),__webpack_require__.e("additionalCharts")]).then(__webpack_require__.t.bind(null,"m0Di",7)),Promise.all([__webpack_require__.e("vendors~additionalCharts"),__webpack_require__.e("additionalCharts")]).then(__webpack_require__.t.bind(null,"JXP8",7))]).then((function(t){var a,r,o,i,n,l,s=_slicedToArray(t,3),_=s[0],c=s[1],u=s[2],d=function(){zoomInterval=setInterval((function(){x.zoomOut()}),300)},p=function(){zoomInterval=setInterval((function(){x.zoomIn()}),300)},m=function(){clearInterval(zoomInterval)};e.L=_,e.tooltip=Object(_tooltip__WEBPACK_IMPORTED_MODULE_17__.createStyledTooltip)(e);var f=_.Browser.mobile,h=e.root,g=e.options,v=e.container,y=e.content,b=e.getSheetData();b.formatter=Object(_helpers_format__WEBPACK_IMPORTED_MODULE_22__.default)(b);var E=b.style.mapFeatureOpacity,O=b.series,P=O.osm,D=O.points;y.style("overflow","hidden");var M=!!g.editable;y.on("gesturestart",(function(e){e.preventDefault(),e.stopPropagation()}));var T=new hammerjs__WEBPACK_IMPORTED_MODULE_11___default.a(y.node());T.on("pinch",(function(e){e.preventDefault(),null==e||e.stopPropagation()})),T.on("swipe",(function(e){e.preventDefault()}));var w,x=e.map;x&&(b.series.map_json=x.props.map_json,!M&&x.sheetIndex===e.sheetIndex&&x._lastCenter&&x._zoom&&x.props.autoZoom===b.series.autoZoom&&(w={center:x._lastCenter,zoom:x._zoom}),delete e.previousCenterLocation,x.eachLayer((function(e){return x.removeLayer(e)})),x.remove()),e.detectDimensions();var C=D.enabled,I=null===(a=b.series.heatmap)||void 0===a?void 0:a.enabled,L=null===(r=b.series.timeline)||void 0===r?void 0:r.enabled;I&&(e.heatmap=e.setupHeatmap(b)),L&&(e.timeToStay=e.setTimeToStay(b));var A=e.runtime={sheet:b,width:g.width,height:g.height,inanimate:Object(_helpers_animation__WEBPACK_IMPORTED_MODULE_20__.inanimated)(g),shouldShowLabels:b.series.showLabels,isHeatmap:I,isTimeline:L,isPointsMode:C,zoomInterval:null,smoothFactor:b.style.smoothFactor,getEntryStyle:createGetEntryStyle(),startTime:b.startTime,currentLayers:[]},k=C?e.prepareSheetDataMarkers(b,_):e.prepareSheetDataPolygons(b,_);if(L&&k.data.sort((function(e,t){return e.start.isSameOrAfter(t.start)?1:-1})),e.runtime.graph=k,e.runtime.shouldShowLabels&&(e.labelStyle=e.setupLabelStyle({style:g.style})),Object(_controls_index__WEBPACK_IMPORTED_MODULE_14__.default)(e,{width:g.width}),L&&k.data.length){Object(_misc__WEBPACK_IMPORTED_MODULE_16__.ensureElement)(h,"igc-label",e.groupTagName),e.labelPlaceholder=h.select(".igc-label");var R=b.startTime,S=b.endTime,B=moment__WEBPACK_IMPORTED_MODULE_12___default.a.duration(S.diff(R)).asMilliseconds(),U=R.clone();e.runtime.parse=Object(d3_time_format__WEBPACK_IMPORTED_MODULE_9__.timeFormat)(b.series.timeline.dataOutputFormat);var W=b.series.timeline.timelineDuration||DEFAULT_ANIMATION_LENGTH,K=B/(W*FRAMES_PER_SECOND);labelRenderer({data:e.runtime.parse(R.toDate()),layout:{marginRight:0,marginBottom:0},style:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(g,"style.axis.x.title",{})})(e.labelPlaceholder),e.timeline={timer:null,step:K,duration:B,fps:FRAMES_PER_SECOND,currentTime:U,startTime:R,endTime:S,timePassed:0,timelineDuration:W},Object(_BarRace_controls__WEBPACK_IMPORTED_MODULE_23__.Controls)({instance:e,width:g.width,onInput:function(t){e.timeline.currentTime=e.timeline.startTime.clone(),e.timeline.timePassed=Math.round(B*t/100),e.timeline.currentTime.add(e.timeline.timePassed,"ms"),clearInterval(e.timeline.timer),e.cycle(!0)},onPlay:function(){return e.play()},onPause:function(){return e.pause()}})}else L?Object(_BarRace_controls__WEBPACK_IMPORTED_MODULE_23__.Controls)({instance:e,width:g.width}):h.selectAll(".igc-label").remove();var j={instance:e,sizeLimit:!1,attachEvents:function(){}};if(I)j.creator=function(e){var t,a=e.instance,r=e.layout,o=a.options,i=a.runtime,n=a.content,l=i.sheet,s=l.series.heatmap,_=l.legend.position,c=r.width,u=r.side,d=o.style.legend;return(u?_legend__WEBPACK_IMPORTED_MODULE_15__.HeatmapVertical:_legend__WEBPACK_IMPORTED_MODULE_15__.Heatmap)({target:n,instance:a,pointsMode:C,data:a.legendData,width:c,maxValue:a.heatmap.maxValue,title:s.legendTitle,coldText:s.coldText,hotText:s.hotText,style:d,position:_,opacity:{active:E,disabled:getOpacity(!1,E)},layout:r.legend,showLegendValues:null===(t=l.legend)||void 0===t?void 0:t.showValues})};else{var z=Object(_legend__WEBPACK_IMPORTED_MODULE_15__.createLegendData)(e),N=prepareLegendData({colors:b.series.groupedColors,entries:b.legendEntries,sort:b.legend.sort,groupingSymbol:b.groupingSymbol,decimalSeparator:b.decimalSeparator}),q=!0,H=!1,F=void 0;try{for(var V,G=N[Symbol.iterator]();!(q=(V=G.next()).done);q=!0){z(V.value)}}catch(e){H=!0,F=e}finally{try{q||null==G.return||G.return()}finally{if(H)throw F}}e.legendData=N,j.attachEvents=attachLegendEvents}var Z=Object(_legend__WEBPACK_IMPORTED_MODULE_15__.legendHelper)(j),Y=A.width;if(w&&(b.view=w),!g.fixedHeight){var J=calculateHeightResponsive(Y,b.series.map_json.view,b.series.latLon,_);A.height=_.Browser.mobile?Math.min(J,A.height):J}if(v.selectAll(".igc-attribution").remove(),P||b.series.map_json.attribution){var X=attribution(P,b.series.map_json.attribution);v.append("div").classed("igc-attribution",!0).html(X)}if(g.fixedHeight){var $=v.select(".igc-attribution");$.node()&&(A.height-=$.node().clientHeight+parseInt($.style("margin-top"),10)),A.height=Math.max(A.height,MINHEIGHT)}g.fixedHeight||(I?redrawHeatmap(e):Z&&Z.redraw()),h.styles({width:"".concat(A.width,"px"),height:"".concat(A.height,"px")}),e.tooltip=Object(_tooltip__WEBPACK_IMPORTED_MODULE_17__.createStyledTooltip)(e);var Q=b.series.map_json.disableZoom||M||!1===b.series.showZoom,ee=!Q&&b.series.doubleClickZoom,te=b.series.latLon?_.CRS.Simple:_.CRS.EPSG3857;if(null===(o=b.series.map_json)||void 0===o?void 0:null===(i=o.crs)||void 0===i?void 0:i.name){var ae=b.series.map_json.crs;te=new c.CRS(ae.name,ae.value,ae.options)}else b.crs&&(te=new c.CRS(b.crs.name,b.crs.value,b.crs.options));var re,oe={attributionControl:!1,zoomControl:!1,crs:te,doubleClickZoom:ee,dragging:!f&&!Q,keyboard:!f&&!M,scrollWheelZoom:!1,tap:!1,touchZoom:!Q,zoomDelta:b.series.zoomDelta,zoomSnap:b.series.zoomDelta/2,preferCanvas:b.series.preferCanvas,maxZoom:18};if((x=e.map=_.map(h.node(),oe)).sheetIndex=e.sheetIndex,x.events=e.events,x.player=e.sheetPlayer,x.labels={},x.props=b.series,x.props.isPointsMode=C,e.container.classed("igc-map-touch",f),e.container.classed("igc-map-zoom-disabled",Q),P){x._container.querySelector(".leaflet-tile-pane").style.opacity=b.style.tileLayerTransparency;var ie=new _.TileLayer(P,{zIndex:0,reuseTiles:!0});ie.addTo(x),ie.on("load",(function(){setTimeout((function(){e.events.call("startAnimation"),setTimeout((function(){e.events.call("endAnimation")}),50)}),A.inanimate?0:1950)}))}else if(!b.series.hideBlanks){var ne=e.setupBackground(b),le=ne.separators,se=ne.background;_.geoJson(se,{style:e.runtime.getEntryStyle,smoothFactor:e.runtime.smoothFactor}).addTo(x),le.features.length&&_.geoJson(le,{style:e.runtime.getEntryStyle,onEachFeature:e.addLayerMouseEvents.bind(e)}).addTo(x)}if(L||!C){if(!L&&!I){var _e=!0,ce=!1,ue=void 0;try{for(var de,pe=k.data[Symbol.iterator]();!(_e=(de=pe.next()).done);_e=!0){var me=de.value;me.groupId=groupNumber(me.label,e.legendData)}}catch(e){ce=!0,ue=e}finally{try{_e||null==pe.return||pe.return()}finally{if(ce)throw ue}}}k.data.length&&e.showAndHideTimelineObjects(),e.runtime.shouldShowLabels&&x.on("zoomend",(function(){return e.updateLabels()})).on("zoomstart",(function(){return e.hideLabels()}))}else{var fe=new u.MarkerClusterGroup({spiderfyOnMaxZoom:!1,showCoverageOnHover:!1,chunkedLoading:!0,maxClusterRadius:D.clusterSize});re=k.data.map((function(t){var a=I?t.groupId:groupNumber(t.label,e.legendData);t.active=!0;var r=_.marker(t.coordinates,{riseOnHover:!0,icon:_.divIcon({className:"map-marker group_".concat(a),html:markerHTML(t,e.runtime.shouldShowLabels,e.labelStyle),iconSize:[0,0]}),clickable:!0,feature:t});return D.clusterSize?fe.addLayer(r):x.addLayer(r),e.addLayerMouseEvents.call(e,t,r),r})),D.clusterSize&&x.addLayer(fe),re=new _.featureGroup(re)}var he=b.series.autoZoom&&k.data.length&&(C?re&&Object.keys(re._layers).length&&re.getBounds().pad(.05):getBounds(k.data))||b.series.map_json.view;x.defaultBounds=he,b.view?(b.view.bounds?x.fitBounds(b.view.bounds):x.setView(b.view.center,b.view.zoom),he=x.getBounds()):x.fitBounds(he),x.bounds=x.getBounds(),P||x.whenReady((function(){setTimeout((function(){e.events.call("startAnimation"),setTimeout((function(){e.events.call("endAnimation")}),50)}),A.inanimate?0:1950)}));var ge=1/lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(g,"scale.x",1);if(!f){var ve=new _.Control({position:"topleft"});ve.onAdd=function(){var e=_.DomUtil.create("div","leaflet-control-zoom-in"),t=_.DomUtil.get(e);return t.style.backgroundImage="url(data:image/svg+xml;utf8,".concat(encodeURIComponent(__webpack_require__("Cuzl").default),")"),t.style.zoom=ge,_.DomEvent.disableClickPropagation(e).addListener(e,"mousedown",p).addListener(e,"click",(function(){x.zoomIn()})).addListener(e,"mouseup",m),e},ve.addTo(x);var ye=new _.Control({position:"topleft"});ye.onAdd=function(){var e=_.DomUtil.create("div","leaflet-control-zoom-out"),t=_.DomUtil.get(e);return t.style.backgroundImage="url(data:image/svg+xml;utf8,".concat(encodeURIComponent(__webpack_require__("efgw").default),")"),t.style.zoom=ge,_.DomEvent.disableClickPropagation(e).addListener(e,"click",(function(){x.zoomOut()})).addListener(e,"mousedown",d).addListener(e,"mouseup",m),e},ye.addTo(x)}e.viewportUnchanged=!0,x.on("contextmenu",m).on("drag",(function(){return x.fire("moveend")})).on("movestart",(function(){e.tooltip().hide(),e.events.call("startAnimation")})).on("moveend",(function(){try{e.viewportUnchanged=x.getBounds(!0).equals(x.bounds)}catch(t){e.viewportUnchanged=!1}f||be.getContainer().classList.toggle("__hidden",e.viewportUnchanged),e.events.call("endAnimation")}));var be=new _.Control({position:"topleft"});be.onAdd=function(){var e=this,t=_.DomUtil.create("div","leaflet-control-restore ".concat(f?"__upsized":"__hidden")),a=_.DomUtil.get(t);return a.style.backgroundImage="url(data:image/svg+xml;utf8,".concat(encodeURIComponent(__webpack_require__("22+b").default),")"),a.style.zoom=f?1.5*ge:ge,_.DomEvent.disableClickPropagation(t).addListener(t,"click",(function(t){x.fitBounds(x.bounds),e.viewportUnchanged=!0,f||(t.currentTarget.classList.add("__hidden"),be.getContainer().classList.toggle("__hidden",!0))}),t),t},be.addTo(x),(null===(n=b.series.map_json)||void 0===n?void 0:null===(l=n.meta)||void 0===l?void 0:l.disclaimer)&&Object(_Disclaimer__WEBPACK_IMPORTED_MODULE_19__.default)(e,b.series.map_json.meta.disclaimer),Object(_DownloadButton__WEBPACK_IMPORTED_MODULE_18__.DownloadButton)(e,g.style.legend)}))}},{key:"updateLabels",value:function(){var e=this;setTimeout((function(){var t=e.map;e.centerOrigin=t.getCenter(),e.previousCenterLocation=t.latLngToContainerPoint(e.centerOrigin),t.eachLayer((function(a){var r,o=null===(r=a.getTooltip())||void 0===r?void 0:r._container;if(o){var i=o.firstChild.getBoundingClientRect();o.style["margin-top"]=-i.height/2+"px",o.style["margin-left"]=-i.width/2+"px";var n=a._layers[Object.keys(a._layers)[0]]._pxBounds,l=n&&n.max.x-n.min.x>30&&n.max.y-n.min.y>20;if(l){var s=parseInt(o.firstChild.getAttribute("data-index"),10),_=e.runtime.graph.data[s].feature,c=_.geometry.coordinates;if("MultiPolygon"===_.geometry.type){var u=Object(d3_array__WEBPACK_IMPORTED_MODULE_8__.scan)(c.map((function(e){return-Object(d3_polygon__WEBPACK_IMPORTED_MODULE_6__.polygonArea)(e[0])})));c=c[u]}var d=polylabel__WEBPACK_IMPORTED_MODULE_10___default()(c).reverse(),p=t.latLngToContainerPoint(d);o.style.left=p.x+e.coordinateOffset.x+"px",o.style.top=p.y+e.coordinateOffset.y+"px"}o.style.visibility=l?"visible":"hidden"}}));var a=[];t.eachLayer((function(e){var t,r=null===(t=e.getTooltip())||void 0===t?void 0:t._container;if(r&&"hidden"!==r.style.visibility){var o=r.firstChild.getBoundingClientRect();overlaps(o,a)?r.style.visibility="hidden":a.push(o)}}))}),50)}},{key:"defaults",value:function(){return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.merge({},_get(_getPrototypeOf(a.prototype),"defaults",this).call(this),{animation:{duration:500}})}},{key:"emptySheetData",value:function(){return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.merge({},_get(_getPrototypeOf(a.prototype),"emptySheetData",this).call(this),{legend:{enabled:!1},series:{heatmap:{enabled:!1},points:{enabled:!1},map_json:{features:[]}},style:{}})}},{key:"setupBackground",value:function(e){var t=e.series,a=t.map_json,r=t.osm,o=a.features,i=a.meta,n=e.style,l=n.inactive,s=n.mapFeatureOpacity,_=n.strokeWidth,c=n.strokeOpacity,u=n.strokeColor,d="number"==typeof _?_:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(a,"featureStrokeWidth",r?2:1),p={type:"Feature",geometry:{type:"MultiPolygon",coordinates:[]},stroke:u,color:l,weight:Math.min(d,.5),strokeOpacity:c,opacity:s,groupId:-1},m={type:"FeatureCollection",features:[]},f=!0,h=!1,g=void 0;try{for(var v,y=this,b=function(){var t=v.value,a=t.geometry.coordinates;if("border"===t.properties.type){var r=y.separatorDefaultStyle(a,i,e.style.inactive);if(t.properties.dashArray&&(r.properties.dashArray=t.properties.dashArray),t.properties.strokeWidth&&(r.properties.strokeWidth=t.properties.strokeWidth),t.properties.boundFeature){var n=o.find((function(e){return e.properties.name===t.properties.boundFeature}));r.properties=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.extend({},n.properties,r.properties),delete r.properties.groupId,r.properties.type="border"}m.features.push(r)}else{var l=p.geometry.coordinates;if("Polygon"===t.geometry.type)l.push(a);else{var s=!0,_=!1,c=void 0;try{for(var u,d=a[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var f=u.value;l.push(f)}}catch(e){_=!0,c=e}finally{try{s||null==d.return||d.return()}finally{if(_)throw c}}}}},E=a.features[Symbol.iterator]();!(f=(v=E.next()).done);f=!0)b()}catch(e){h=!0,g=e}finally{try{f||null==E.return||E.return()}finally{if(h)throw g}}return{background:p,separators:m}}},{key:"separatorDefaultStyle",value:function(e,t,a){var r,o,i,n,l,s,_,c;return{geometry:{type:null!==(l=null==t?void 0:null===(r=t.border)||void 0===r?void 0:r.separatorType)&&void 0!==l?l:"MultiLineString",coordinates:[e]},properties:{hideLabel:!0,stroke:null!==(s=null==t?void 0:null===(o=t.border)||void 0===o?void 0:o.stroke)&&void 0!==s?s:a,weight:null!==(_=null==t?void 0:null===(i=t.border)||void 0===i?void 0:i.strokeWeight)&&void 0!==_?_:1.5,dashArray:null!==(c=null==t?void 0:null===(n=t.border)||void 0===n?void 0:n.dashArray)&&void 0!==c?c:"0",opacity:0,groupId:-1},type:"Feature"}}},{key:"setupHeatmap",value:function(e){for(var t=e.series.heatmap,a=t.heatmapEntries,r=t.hotColor,o=t.coldColor,i=e.series.limits||e.defaultLimits,n=[],l=[],s=Object(d3_scale__WEBPACK_IMPORTED_MODULE_5__.scaleLinear)().domain(i).range(i).ticks(a),_=e.formatter.axis.x.createTickFormatter(s,e.axis[0]),c=s.map((function(e){return _(e)})),u=c.length,d=0;d<u-1;d++)n[d]=Object(d3_interpolate__WEBPACK_IMPORTED_MODULE_4__.interpolateRgb)(o,r)(d/(u-2)),l[d]={text:c[d],color:n[d],groupId:d};var p=function(e){var t=createHeatmapIndexer(s);return function(a){return Math.min(e,t(a))}}(n.length-1);return this.legendData=l,{colors:n,index:p,heatmapValues:c,maxValue:c[u-1],ticks:s}}},{key:"prepareSheetDataPolygons",value:function(e){var t,a=e.series,r=a.data,o=a.localisation,i=a.osm,n=a.map_json,l=a.groupedData,s=e.style,_=s.colors,c=s.strokeWidth,u=s.mapFeatureOpacity,d=s.strokeOpacity,p=e.tooltip,m=this.runtime,f=m.isHeatmap,h=m.isTimeline,g=void 0!==c?c:(null!==(t=null==n?void 0:n.featureStrokeWidth)&&void 0!==t?t:i)?2:1,v=this.tooltipEnabled(),y=l?"group":"title",b=0,E=!0,O=!1,P=void 0;try{for(var D,M=this,T=function(){var t=D.value,a=n.features.find((function(e){return e.properties.name===t.key}));if(!a||""===t.value&&f)return"continue";if(t.feature=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.cloneDeep(a),f){var r=M.heatmap.index(t.valueNumber);t.feature.groupId=r,t.color=t.feature.color=M.heatmap.colors[r]}else{var s=t[y];e.series.groupedColors[s]||(e.series.groupedColors[s]=Object(_misc__WEBPACK_IMPORTED_MODULE_16__.getColor)(b,_),b++),t.color=t.feature.color=e.series.groupedColors[s],t.feature.groupedData=l,t.feature.groupId=-1}t.displayValue=(t.value&&p.showValue?formattedValue(t.value,e.formatter)+"\n":"")+t.text,t.regionName=t.feature.regionName=o?a.properties[o]:t.label||t.title,t.label=l?t.group:o?a.properties[o]:t.label||t.title,t.groupName=!1!==p.showGroupNames?t.group:null,t.showTooltip=v,v&&(t.text=t.regionName+(t.groupName?"\n"+t.groupName:"")),t.feature.weight=g,t.feature.opacity=u,t.feature.strokeOpacity=d,t.feature.stroke=i?t.color:e.style.strokeColor,delete t.active,h&&e.series.timeline.fixedStayTime&&(t.end=t.start.clone().add(M.timeToStay))},w=r[Symbol.iterator]();!(E=(D=w.next()).done);E=!0)T()}catch(e){O=!0,P=e}finally{try{E||null==w.return||w.return()}finally{if(O)throw P}}return{data:r,colors:_}}},{key:"prepareSheetDataMarkers",value:function(e,t){var a,r=this,o=this.runtime,i=o.isHeatmap,n=o.isTimeline,l=e.series,s=l.data,_=l.osm,c=l.map_json,u=l.points,d=l.groupedData,p=l.groupedColors,m=u.pointSizemin,f=u.pointSizemax,h=u.shape,g=e.tooltip,v=e.formatter,y=e.style,b=y.markerOpacity,E=y.colors,O=c.corrections,P=d?"group":"title",D=0;return{data:Object.values(s).filter((function(e){return e.coordinates[0]&&e.coordinates[1]&&(""!==e.value||!i)})).map((function(a){!_&&O&&(a=fixMovedLocations(a,O,t.bounds));var o,l=i?f:Math.round(Math.max(m,f*Math.sqrt(a.relativeValue))),s=Math.round(h.dimensions.height*l/h.dimensions.width),c=a[P],u=-1,y=d?a.group:a.label;if(i){var M=r.heatmap.colors,T=M.length,w=Math.floor(T*a.relativeValue);w>=T?w=T-1:w<0&&(w=0),o=M[w],u=w}p[c]||(p[c]=Object(_misc__WEBPACK_IMPORTED_MODULE_16__.getColor)(D,E),D++);var x,C=o||p[c],I=r.tooltipEnabled(),L=g.showValue&&null!==a.value?formattedValue(a.value,v)+"\n":"";return I&&(x=a.label,a.group&&!1!==g.showGroupNames&&(x+="\n"+a.group)),n&&e.series.timeline.fixedStayTime&&(a.end=a.start.clone().add(r.timeToStay)),{color:C,coordinates:a.coordinates,dimensions:h.dimensions,groupId:u,groupName:d?a.group:"",label:y,link:a.link,name:a[P],regionName:a.label,showTooltip:I,text:x,displayValue:L+a.text,path:h.path,height:s,opacity:b,scale:l/h.dimensions.width,verticalOffset:h.verticalOffset,width:l,start:a.start,end:a.end,fillRule:h.fillRule}})),colors:E,maxValue:null===(a=this.heatmap)||void 0===a?void 0:a.maxValue}}},{key:"setTimeToStay",value:function(e){var t=e.startTime,a=e.endTime;return moment__WEBPACK_IMPORTED_MODULE_12___default.a.duration(a.diff(t)).asMilliseconds()*(e.series.timeline.stayLength||DEFAULT_STAY_LENGTH)/(e.series.timeline.timelineDuration||DEFAULT_ANIMATION_LENGTH)}},{key:"applySheetOptions",value:function(e){e&&this.options.sheets.forEach((function(t,a){var r=function(t){return e[t]||e[0]}(a+1);r.axis&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.merge(t.axis,r.axis),r.legend&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.merge(t.legend,r.legend),r.series&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.merge(t.series,r.series),r.style&&(t.style=t.style||{},lodash__WEBPACK_IMPORTED_MODULE_0___default.a.merge(t.style,r.style)),r.tooltip&&(t.tooltip=t.tooltip||{},lodash__WEBPACK_IMPORTED_MODULE_0___default.a.merge(t.tooltip,r.tooltip)),t.view=r.view}))}}],[{key:"getClassName",value:function(){return"Map"}}]),a}(_chart__WEBPACK_IMPORTED_MODULE_13__.default)},Cuzl:function(e,t,a){"use strict";a.r(t),t.default='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="8" height="8" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M512 320l-192 0 0 192-128 0 0-192-192 0 0-128 192 0 0-192 128 0 0 192 192 0z" fill="#fff"/></svg>\n'},"JR+o":function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return o}));var r=a("HTVg");function o(e,t){var a=e.container,o=e.runtime;a.selectAll(".igc-disclaimer").remove();var i=a.insert("div").attr("class","igc-disclaimer captiontext").text(t.text);o.height-=Object(r.outerHeight)(i.node())}},VLlq:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return s}));var r=a("LvDl"),o=a.n(r),i=a("kX2h"),n=a("cSt8"),l=a("nGGV");function s(e){var t=e.options.sheetSwitch,a={tab:i.default,player:n.Player,radio:l.RadioSwitcher},r=o.a.get(t,"type"),s=a[r]||l.RadioSwitcher;s.apply(null,arguments)}},XKSt:function(e,t,a){"use strict";a.r(t),a.d(t,"toKebabCase",(function(){return i}));var r=a("LvDl"),o=a.n(r);function i(e){return Object.keys(e).reduce((function(t,a){return t[o.a.kebabCase(a)]=e[a],t}),{})}},efgw:function(e,t,a){"use strict";a.r(t),t.default='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="8" height="8" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 320l512 0 0-128-512 0z" fill="#fff"/></svg>\n'},nGGV:function(e,t,a){"use strict";a.r(t),a.d(t,"RadioSwitcher",(function(){return _}));var r=a("LvDl"),o=a.n(r),i=a("/TIM"),n=a("x5YE"),l=a("cSt8"),s=a("P0iM");function _(e,t){var a=e.container,r=e.options,_=e.sheetIndex,c=r.sheets,u=e.interaction;if(Object(l.removeSheetPlayer)(e),a.selectAll(".igc-sheets").remove(),!Object(s.sheetsEmpty)(e)){var d=o.a.get(r,"style.sheetSwitch.radio"),p=function(e){var t=e.insert("span").attr("class","igc-sm-sheet-switch-radio").style("visibility","hidden").style("position","absolute").style("top","0px").style("left","0px").append("div").attr("class","igc-sheets").append("div").attr("class","igc-sheet").append("span").attr("class","igc-sheet-ico").node().offsetWidth;return e.select(".igc-sm-sheet-switch-radio").remove(),t}(a),m=Object(n.TextItemMetrics)().width(t.width).texts(c.map((function(e){return e.categories.title}))).style(d).parentContainer(a).reservedSize(p+20)(),f=a.insert("div",".igc-content").attr("class","igc-sheets").attr("role","radiogroup").attr("aria-label","select sheet").style("width","".concat(t.width,"px")),h=f.selectAll(".igc-sheet").data(c.map((function(e,t){return{name:e.categories.title,sheetIndex:t}})));(h=h.merge(h.enter().append("div"))).attr("class","igc-sheet").attr("role","radio").attr("aria-checked",(function(e){return e.sheetIndex===_?"true":"false"})).attr("aria-labelledby",(function(e){return"igc-sheet-label".concat(e.sheetIndex)})).attr("class",(function(e){return e.sheetIndex===_?"igc-sheet active":"igc-sheet"})).style("max-width","".concat(m.width,"px")),h.append("span").attr("class","igc-sheet-ico").attr("role","presentation").attr("id",(function(e){return"igc-sheet-".concat(e.sheetIndex)})),h.append("span").attr("class","igc-sheet-label").html((function(e){return e.name})).attr("id",(function(e){return"igc-sheet-label".concat(e.sheetIndex)})).styles(d).style("height","".concat(m.label.height,"px")).style("max-width","".concat(m.label.width,"px")),h.on("click",(function(t,r){var o=Object(i.select)(this);u("sheetSwitch.item","click"),e.sheetIndex!==r.sheetIndex&&(a.selectAll(".igc-sheet.active").attr("class","igc-sheet").attr("aria-checked","false"),o.classed("active",!0).attr("aria-checked","true"),e.sheetIndex=r.sheetIndex,delete e.legendData,e.render())})),Object(s.subtractHeight)(e,f.node())}}},"s9+M":function(e,t,a){"use strict";a.r(t),a.d(t,"assignNumberFormatValues",(function(){return s})),a.d(t,"assignNumberFormatLabels",(function(){return _}));var r=a("LvDl"),o=a.n(r),i=a("u59D"),n={label:{libraryTargetPath:"labels.format",customAffixPath:"labels.graph.item.format.affix"},x:{libraryTargetPath:"tooltip.format.x",customAffixPath:"labels.tooltip.format.x.affix"},y:{libraryTargetPath:"tooltip.format.y",customAffixPath:"labels.tooltip.format.y.affix"},y2:{libraryTargetPath:"tooltip.format.y2",customAffixPath:"labels.tooltip.format.y2.affix"}};function l(e,t,a){var r=t.decimalSeparator,n=t.groupingSymbol;n&&o.a.set(e,"grouping","none"===n?"":n);var l=!1===r;o.a.set(e,"decimal",l?".,":r);var s=a?new i.default("firstNumber",a):new i.default(l?"legacy":"firstNumber",r);o.a.set(e,"numberParser",s)}function s(e){var t=e.sheetOptions,a=e.custom,r=e.axis,i=e.inputDecimalSeparator,n={x:0,y:1,y2:2,x1:0,y1:1};r.forEach((function(e){var r=e.id,s=e.path,_=s?o.a.get(a,s,{}):a,u=t.axis[n[r]];o.a.has(u,"format")||o.a.set(u,"format",{});var d=u.format;if(c(d,_),!["x1","y1"].includes(r)){l(d,_,i);var p=["useSIPrefixes"];o.a.get(a,"axis.".concat(r,".affix"),!0)&&p.push("prefix","suffix"),p.forEach((function(e){var t=o.a.get(_,e);void 0!==t&&o.a.set(d,e,t)}))}}))}function _(e){var t=e.sheetOptions,a=e.custom,r=e.affixes,i=void 0===r?[]:r,s=e.inputDecimalSeparator;i.forEach((function(e){var r=e.id,i=e.path,_=e.ignoreCheck,u=e.defaultValue,d=n[r],p=d.libraryTargetPath,m=d.customAffixPath,f=i?o.a.get(a,i,{}):a,h=o.a.pick(f,"prefix","suffix");c(h,f),l(h,f,s),_||o.a.get(a,m,u)||(o.a.unset(h,"prefix"),o.a.unset(h,"suffix")),o.a.set(t,p,h)}))}function c(e,t){var a=t.decimalPlaces,r=t.decimalPlacesValue;a&&void 0!==r&&o.a.set(e,"decimalPlaces",r)}},wZn9:function(e,t,a){"use strict";a.r(t),a.d(t,"assignAxisTitles",(function(){return l})),a.d(t,"assignAxisLimits",(function(){return s})),a.d(t,"assignAxisTicks",(function(){return _})),a.d(t,"assignAxisTickInterval",(function(){return c})),a.d(t,"assignAxisInverse",(function(){return u})),a.d(t,"assignCategoryLabelLayout",(function(){return d}));var r=a("LvDl"),o=a.n(r),i=["x","y","y2"],n=["min","max"];function l(e,t,a){var r=!0,o=!1,n=void 0;try{for(var l,s=a[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var _=l.value;e.axis[i.indexOf(_)].title=t["".concat(_,"label")]||""}}catch(e){o=!0,n=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw n}}}function s(e,t,a){var r=!0,o=!1,l=void 0;try{for(var s,_=a[Symbol.iterator]();!(r=(s=_.next()).done);r=!0){var c=s.value,u=!0,d=!1,p=void 0;try{for(var m,f=n[Symbol.iterator]();!(u=(m=f.next()).done);u=!0){var h=m.value,g=t["".concat(c).concat(h)];"number"==typeof g&&(e.axis[i.indexOf(c)]["".concat(h,"Limit")]=g)}}catch(e){d=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(d)throw p}}}}catch(e){o=!0,l=e}finally{try{r||null==_.return||_.return()}finally{if(o)throw l}}}function _(e,t){e.axis.forEach((function(e,a){e.ticks=o.a.get(t,"labels.axis.".concat(i[a],".tick.enabled"),!0)}))}function c(e,t){e.axis.forEach((function(e,a){var r=o.a.get(t,"axis.".concat(i[a],".ticks"));void 0!==r&&(e.tickInterval=r)}))}function u(e,t,a){var r=i.indexOf(a);o.a.set(e,"axis[".concat(r,"].invert"),o.a.get(t,"axis.".concat(a,".invert"),!1))}function d(e,t){"tilted"===t.categoryLayout&&o.a.set(e,"categories.layout","tilted")}}}]);