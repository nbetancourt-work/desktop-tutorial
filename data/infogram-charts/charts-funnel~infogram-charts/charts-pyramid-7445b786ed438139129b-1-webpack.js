(window.webpackJsonp=window.webpackJsonp||[]).push([["infogram-charts/charts-funnel~infogram-charts/charts-pyramid"],{"2YLo":function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.r(e),n.d(e,"Renderer",(function(){return r}));var r=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e.instance)throw new Error("No instance provided");this.renderables=[],this.instance=e.instance}var e,n,r;return e=t,(n=[{key:"start",value:function(){var t=this.instance,e=t.root,n=e.select(".igc"),i={igc:n,grid:n.select(".igc-grid"),title:e.select(".igc-titles")};this.renderables.forEach((function(e){"function"!=typeof e?"object"==typeof e&&(-1===["grid","title"].indexOf(e.parent)?"igc"!==e.parent?t.renderPart(e.parent,e.callable,e.className):t.renderGraphs(i.igc,e.callable):t.renderPart(i[e.parent],e.callable,e.className)):e()}))}},{key:"add",value:function(t){return this.renderables.push(t),t}},{key:"addGrid",value:function(t,e){var n={callable:t,className:e,parent:"grid"};return this.add(n),n}},{key:"addTitle",value:function(t,e){var n={callable:t,className:e,parent:"title"};return this.add(n),n}},{key:"addParent",value:function(t,e,n){var i={callable:e,className:n,parent:t};return this.add(i),i}},{key:"addGraph",value:function(t){var e={callable:t,parent:"igc"};return this.add(e),e}}])&&i(e.prototype,n),r&&i(e,r),t}()},VLlq:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return s}));var i=n("LvDl"),r=n.n(i),a=n("kX2h"),o=n("cSt8"),l=n("nGGV");function s(t){var e=t.options.sheetSwitch,n={tab:a.default,player:o.Player,radio:l.RadioSwitcher},i=r.a.get(e,"type"),s=n[i]||l.RadioSwitcher;s.apply(null,arguments)}},"i+/1":function(t,e,n){"use strict";n.r(e),n.d(e,"Pyramid",(function(){return f}));var i=n("LvDl"),r=n.n(i),a=n("30U6"),o=n("/TIM"),l=n("8d86"),s=n("+3eq"),h=n("3y/1"),c=n("p8DI"),u=n("XKI8"),d=n("eXr4");function f(){var t,e,n,i,f=function(t,e){var i=E.xScale,r=E.yScale,a=E.regularEdge,o="up"===E.direction,l=i(t[a?"index":"value"]),s=r(t.index),h=r.bandwidth(),c=i(0),u=o?s:s+h,d=n[e+1],f={top:{},bottom:{}};if(o&&(s+=h),E.singleColor&&(o?u+=2:e&&(s+=2)),d){var p=i(d[a?"index":"value"]);f.top={right:{x:p,y:u},left:{x:2*c-p,y:u}}}else E.zeroEnding?f.top.left=f.top.right={x:c,y:u}:f.top={right:{x:l,y:u},left:{x:2*c-l,y:u}};return f.bottom={left:{x:2*c-l,y:s},right:{x:l,y:s}},f.bottom.width=f.bottom.right.x-f.bottom.left.x,f.top.width=f.top.right.x-f.top.left.x,f.height=h,f.top.width<3&&d&&(f.top.left.x=c-1.5,f.top.right.x=c+1.5,f.top.width=3),f.bottom.width<3&&(f.bottom.left.x=c-1.5,f.bottom.right.x=c+1.5,f.bottom.width=3),f},p=function(t){return t.index},g=function(t){var e=t.top,n=t.bottom;return[e.left,e.right,n.right,n.left]},m=function(t){return{d:function(e,n){return i=t[n],r=E.xScale(0),O(g(i).map((function(t){return Object({x:r,y:t.y})})));var i,r},fill:function(t){return t.color},class:z?"entering":"entered"}},y=function(t,e){return t.select((function(){return this.getAttribute("class")===e?this:null}))},v=function(){if(n.length){var t=n.map(f),e=Object(o.select)(this),i=e.selectAll("path"),r=i.data(n,p),a=r.enter().append("path").attrs(m(t));r.exit().remove(),r=a.merge(r),i.transition().duration(0);var l=y(r,"entering"),h=y(r,"entered"),u=l.size(),d=h.size();d?h.transition().duration(E.transitionDuration).attrs(x(t)).on("end",v):S(),b(e,t)}else D.call("animationEnd");function g(){--u<1&&w()}function v(){--d<1&&S()}function w(){var n=b(e,t);Object(c.addMouseEvents)(r,D,j,E.tooltipText,E.tooltipValue),n&&n.size()&&Object(c.addMouseEvents)(n,D,j,E.tooltipText,E.tooltipValue)}function S(){var e;e=E.transitionDuration,u?l.transition().duration(e).ease(s.easeElastic).delay((function(t,e){return 50*e})).attrs(x(t)).on("end",g):w()}},x=function(t){return{fill:function(t){return t.color},d:function(e,n){return i=t[n],O(g(i));var i},class:"entered"}},b=function(t,e){var r=function(t){return i?i.format(t.rawValue):t.rawValue},a=E.yScale,o=E.xScale,l=Object(h.getAllTextDimensions)(n.map(r),E.textStyle),s=a.bandwidth(),c=E.showValues&&Math.abs(s)>l.height,u=s/2;if(!c)return t.selectAll("text").remove(),void M();var f=Object(d.createLabel)(t,n.map((function(t,n){var i=l.collection[n],r=e[n],s=r.top,h=r.bottom,c=(s.width+h.width)/2,d=c>i.width+5,f=o(0);return d||(f+=(c=(Math.abs(s.width)+Math.abs(h.width))/2)/2+5+i.width/2),{inside:d,anchor:d?"middle":"left",textX:f,textY:a(t.index)+u,index:t.index,color:t.color,label:t.label,textAnchor:"middle",rawValue:t.rawValue}})),E.textStyle,p);return 0===f.size()&&M(),f.attr("dominant-baseline","central").transition().duration(E.transitionDuration).style("opacity",1).on("start",(function(){S++})).on("end",(function(){0==--S&&M()})),Object(d.addOutline)(f,E.textStyle,r),f},w=function(t){t.each(v)},E={},S=0,O=Object(l.line)().x((function(t){return t.x})).y((function(t){return t.y})).curve(l.curveLinearClosed),j=u.getTooltip,z=!0,D=Object(a.dispatch)("animationEnd","openUrl"),M=r.a.after(2,(function(){D.call("animationEnd")}));return Object.assign(w,{groupId:function(t){return arguments.length?(e=t,w):e},chartId:function(e){return arguments.length?(t=e,w):t},setup:function(t){return arguments.length?(E=r.a.extend(t),w):E},tooltip:function(t){return arguments.length?(j=t,w):j},labelFormat:function(t){return arguments.length?(i=t,w):i},data:function(t){return arguments.length?(n=t,w):n},dispatch:function(){return D},animate:function(t){return arguments.length?(z=t,w):w}}),w}},nGGV:function(t,e,n){"use strict";n.r(e),n.d(e,"RadioSwitcher",(function(){return h}));var i=n("LvDl"),r=n.n(i),a=n("/TIM"),o=n("x5YE"),l=n("cSt8"),s=n("P0iM");function h(t,e){var n=t.container,i=t.options,h=t.sheetIndex,c=i.sheets,u=t.interaction;if(Object(l.removeSheetPlayer)(t),n.selectAll(".igc-sheets").remove(),!Object(s.sheetsEmpty)(t)){var d=r.a.get(i,"style.sheetSwitch.radio"),f=function(t){var e=t.insert("span").attr("class","igc-sm-sheet-switch-radio").style("visibility","hidden").style("position","absolute").style("top","0px").style("left","0px").append("div").attr("class","igc-sheets").append("div").attr("class","igc-sheet").append("span").attr("class","igc-sheet-ico").node().offsetWidth;return t.select(".igc-sm-sheet-switch-radio").remove(),e}(n),p=Object(o.TextItemMetrics)().width(e.width).texts(c.map((function(t){return t.categories.title}))).style(d).parentContainer(n).reservedSize(f+20)(),g=n.insert("div",".igc-content").attr("class","igc-sheets").attr("role","radiogroup").attr("aria-label","select sheet").style("width","".concat(e.width,"px")),m=g.selectAll(".igc-sheet").data(c.map((function(t,e){return{name:t.categories.title,sheetIndex:e}})));(m=m.merge(m.enter().append("div"))).attr("class","igc-sheet").attr("role","radio").attr("aria-checked",(function(t){return t.sheetIndex===h?"true":"false"})).attr("aria-labelledby",(function(t){return"igc-sheet-label".concat(t.sheetIndex)})).attr("class",(function(t){return t.sheetIndex===h?"igc-sheet active":"igc-sheet"})).style("max-width","".concat(p.width,"px")),m.append("span").attr("class","igc-sheet-ico").attr("role","presentation").attr("id",(function(t){return"igc-sheet-".concat(t.sheetIndex)})),m.append("span").attr("class","igc-sheet-label").html((function(t){return t.name})).attr("id",(function(t){return"igc-sheet-label".concat(t.sheetIndex)})).styles(d).style("height","".concat(p.label.height,"px")).style("max-width","".concat(p.label.width,"px")),m.on("click",(function(e,i){var r=Object(a.select)(this);u("sheetSwitch.item","click"),t.sheetIndex!==i.sheetIndex&&(n.selectAll(".igc-sheet.active").attr("class","igc-sheet").attr("aria-checked","false"),r.classed("active",!0).attr("aria-checked","true"),t.sheetIndex=i.sheetIndex,delete t.legendData,t.render())})),Object(s.subtractHeight)(t,g.node())}}},"s9+M":function(t,e,n){"use strict";n.r(e),n.d(e,"assignNumberFormatValues",(function(){return s})),n.d(e,"assignNumberFormatLabels",(function(){return h}));var i=n("LvDl"),r=n.n(i),a=n("u59D"),o={label:{libraryTargetPath:"labels.format",customAffixPath:"labels.graph.item.format.affix"},x:{libraryTargetPath:"tooltip.format.x",customAffixPath:"labels.tooltip.format.x.affix"},y:{libraryTargetPath:"tooltip.format.y",customAffixPath:"labels.tooltip.format.y.affix"},y2:{libraryTargetPath:"tooltip.format.y2",customAffixPath:"labels.tooltip.format.y2.affix"}};function l(t,e,n){var i=e.decimalSeparator,o=e.groupingSymbol;o&&r.a.set(t,"grouping","none"===o?"":o);var l=!1===i;r.a.set(t,"decimal",l?".,":i);var s=n?new a.default("firstNumber",n):new a.default(l?"legacy":"firstNumber",i);r.a.set(t,"numberParser",s)}function s(t){var e=t.sheetOptions,n=t.custom,i=t.axis,a=t.inputDecimalSeparator,o={x:0,y:1,y2:2,x1:0,y1:1};i.forEach((function(t){var i=t.id,s=t.path,h=s?r.a.get(n,s,{}):n,u=e.axis[o[i]];r.a.has(u,"format")||r.a.set(u,"format",{});var d=u.format;if(c(d,h),!["x1","y1"].includes(i)){l(d,h,a);var f=["useSIPrefixes"];r.a.get(n,"axis.".concat(i,".affix"),!0)&&f.push("prefix","suffix"),f.forEach((function(t){var e=r.a.get(h,t);void 0!==e&&r.a.set(d,t,e)}))}}))}function h(t){var e=t.sheetOptions,n=t.custom,i=t.affixes,a=void 0===i?[]:i,s=t.inputDecimalSeparator;a.forEach((function(t){var i=t.id,a=t.path,h=t.ignoreCheck,u=t.defaultValue,d=o[i],f=d.libraryTargetPath,p=d.customAffixPath,g=a?r.a.get(n,a,{}):n,m=r.a.pick(g,"prefix","suffix");c(m,g),l(m,g,s),h||r.a.get(n,p,u)||(r.a.unset(m,"prefix"),r.a.unset(m,"suffix")),r.a.set(e,f,m)}))}function c(t,e){var n=e.decimalPlaces,i=e.decimalPlacesValue;n&&void 0!==i&&r.a.set(t,"decimalPlaces",i)}},"tU/c":function(t,e,n){var i,r,a;r=[],void 0===(a="function"==typeof(i=function(){return function(){function t(e){var n,i;if(this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this.maxElements=e.maxElements,null==this.width||null==this.height)throw new Error("Missing quadtree dimensions.");if(null==this.x&&(this.x=0),null==this.y&&(this.y=0),null==this.maxElements&&(this.maxElements=1),this.contents=[],this.oversized=[],this.size=0,this.width<1||this.height<1)throw new Error("Dimensions must be positive integers.");if(!Number.isInteger(this.x)||!Number.isInteger(this.y))throw new Error("Coordinates must be integers");if(this.maxElements<1)throw new Error("The maximum number of elements before a split must be a positive integer.");for(n in i=this,this.children={NW:{create:function(){return new t({x:i.x,y:i.y,width:Math.max(Math.floor(i.width/2),1),height:Math.max(Math.floor(i.height/2),1),maxElements:i.maxElements})},tree:null},NE:{create:function(){return new t({x:i.x+Math.max(Math.floor(i.width/2),1),y:i.y,width:Math.ceil(i.width/2),height:Math.max(Math.floor(i.height/2),1),maxElements:i.maxElements})},tree:null},SW:{create:function(){return new t({x:i.x,y:i.y+Math.max(Math.floor(i.height/2),1),width:Math.max(Math.floor(i.width/2),1),height:Math.ceil(i.height/2),maxElements:i.maxElements})},tree:null},SE:{create:function(){return new t({x:i.x+Math.max(Math.floor(i.width/2),1),y:i.y+Math.max(Math.floor(i.height/2),1),width:Math.ceil(i.width/2),height:Math.ceil(i.height/2),maxElements:i.maxElements})},tree:null}},this.children)this.children[n].get=function(){return null!=this.tree?this.tree:(this.tree=this.create(),this.tree)}}var e,n,i,r,a,o,l,s;return r=function(t){var e,n;return{x:Math.floor((null!=(e=t.width)?e:1)/2)+t.x,y:Math.floor((null!=(n=t.height)?n:1)/2)+t.y}},e=function(t,e){var n,i,r,a;return!(t.x>=e.x+(null!=(n=e.width)?n:1)||t.x+(null!=(i=t.width)?i:1)<=e.x||t.y>=e.y+(null!=(r=e.height)?r:1)||t.y+(null!=(a=t.height)?a:1)<=e.y)},n=function(t,e){var n;return n=r(e),t.x<n.x?t.y<n.y?"NW":"SW":t.y<n.y?"NE":"SE"},s=function(t){if("object"!=typeof t)throw new Error("Element must be an Object.");if(null==t.x||null==t.y)throw new Error("Coordinates properties are missing.");if((null!=t?t.width:void 0)<0||(null!=t?t.height:void 0)<0)throw new Error("Width and height must be positive integers.")},o=function(t){var e,n,i,r;return n=Math.max(Math.floor(t.width/2),1),i=Math.ceil(t.width/2),r=Math.max(Math.floor(t.height/2),1),e=Math.ceil(t.height/2),{NW:{x:t.x,y:t.y,width:n,height:r},NE:{x:t.x+n,y:t.y,width:i,height:r},SW:{x:t.x,y:t.y+r,width:n,height:e},SE:{x:t.x+n,y:t.y+r,width:i,height:e}}},i=function(t,n){var i,r,a,l;for(r in l=[],a=o(n))i=a[r],e(t,i)&&l.push(r);return l},a=function(t,e){var n;return(n=function(n){return t["_"+n]=t[n],Object.defineProperty(t,n,{set:function(t){return e.remove(this,!0),this["_"+n]=t,e.push(this)},get:function(){return this["_"+n]},configurable:!0})})("x"),n("y"),n("width"),n("height")},l=function(t){var e;return(e=function(e){if(null!=t["_"+e])return delete t[e],t[e]=t["_"+e],delete t["_"+e]})("x"),e("y"),e("width"),e("height")},t.prototype.clear=function(){var t,e;for(t in this.contents=[],this.oversized=[],this.size=0,e=[],this.children)e.push(this.children[t].tree=null);return e},t.prototype.push=function(t,e){return this.pushAll([t],e)},t.prototype.pushAll=function(t,e){var n,r,o,l,h,c,u,d,f,p,g,m,y,v,x,b,w,E,S,O;for(g=0,v=t.length;g<v;g++)p=t[g],s(p),e&&a(p,this);for(u=[{tree:this,elements:t}];u.length>0;){for(O=(w=u.shift()).tree,d={NW:null,NE:null,SW:null,SE:null},m=0,x=(c=w.elements).length;m<x;m++)if(h=c[m],O.size++,1!==(f=i(h,O)).length||1===O.width||1===O.height)O.oversized.push(h);else if(O.size-O.oversized.length<=O.maxElements)O.contents.push(h);else{for(l=f[0],S=O.children[l],null==d[l]&&(d[l]={tree:S.get(),elements:[]}),d[l].elements.push(h),y=0,b=(E=O.contents).length;y<b;y++)r=E[y],null==d[o=i(r,O)[0]]&&(d[o]={tree:O.children[o].get(),elements:[]}),d[o].elements.push(r);O.contents=[]}for(l in d)null!=(n=d[l])&&u.push(n)}return this},t.prototype.remove=function(t,e){var i,r;return s(t),(i=this.oversized.indexOf(t))>-1?(this.oversized.splice(i,1),this.size--,e||l(t),!0):(i=this.contents.indexOf(t))>-1?(this.contents.splice(i,1),this.size--,e||l(t),!0):!(null==(r=this.children[n(t,this)]).tree||!r.tree.remove(t,e)||(this.size--,0===r.tree.size&&(r.tree=null),0))},t.prototype.colliding=function(t,n){var r,a,o,l,h,c,u,d,f,p,g,m,y,v;for(null==n&&(n=e),s(t),h=[],o=[this];o.length>0;){for(c=0,f=(m=(v=o.shift()).oversized).length;c<f;c++)(a=m[c])!==t&&n(t,a)&&h.push(a);for(u=0,p=(y=v.contents).length;u<p;u++)(a=y[u])!==t&&n(t,a)&&h.push(a);for(0===(l=i(t,v)).length&&(l=[],t.x>=v.x+v.width&&l.push("NE"),t.y>=v.y+v.height&&l.push("SW"),l.length>0&&(1===l.length?l.push("SE"):l=["SE"])),d=0,g=l.length;d<g;d++)r=l[d],null!=v.children[r].tree&&o.push(v.children[r].tree)}return h},t.prototype.onCollision=function(t,n,r){var a,o,l,h,c,u,d,f,p,g,m,y,v;for(null==r&&(r=e),s(t),l=[this];l.length>0;){for(c=0,f=(m=(v=l.shift()).oversized).length;c<f;c++)(o=m[c])!==t&&r(t,o)&&n(o);for(u=0,p=(y=v.contents).length;u<p;u++)(o=y[u])!==t&&r(t,o)&&n(o);for(0===(h=i(t,v)).length&&(h=[],t.x>=v.x+v.width&&h.push("NE"),t.y>=v.y+v.height&&h.push("SW"),h.length>0&&(1===h.length?h.push("SE"):h=["SE"])),d=0,g=h.length;d<g;d++)a=h[d],null!=v.children[a].tree&&l.push(v.children[a].tree)}return null},t.prototype.get=function(t){return this.where(t)},t.prototype.where=function(t){var e,i,r,a,o,l,h,c,u,d,f,p,g;if("object"==typeof t&&(null==t.x||null==t.y))return this.find((function(e){var n,i;for(i in n=!0,t)t[i]!==e[i]&&(n=!1);return n}));for(s(t),a=[],r=[this];r.length>0;){for(o=0,c=(d=(g=r.shift()).oversized).length;o<c;o++){for(h in i=d[o],e=!0,t)t[h]!==i[h]&&(e=!1);e&&a.push(i)}for(l=0,u=(f=g.contents).length;l<u;l++){for(h in i=f[l],e=!0,t)t[h]!==i[h]&&(e=!1);e&&a.push(i)}null!=(p=g.children[n(t,g)]).tree&&r.push(p.tree)}return a},t.prototype.each=function(t){var e,n,i,r,a,o,l,s,h,c;for(n=[this];n.length>0;){for(r=0,o=(s=(c=n.shift()).oversized).length;r<o;r++)i=s[r],"function"==typeof t&&t(i);for(a=0,l=(h=c.contents).length;a<l;a++)i=h[a],"function"==typeof t&&t(i);for(e in c.children)null!=c.children[e].tree&&n.push(c.children[e].tree)}return this},t.prototype.find=function(t){var e,n,i,r,a,o,l,s,h,c,u;for(n=[this],r=[];n.length>0;){for(a=0,l=(h=(u=n.shift()).oversized).length;a<l;a++)i=h[a],("function"==typeof t?t(i):void 0)&&r.push(i);for(o=0,s=(c=u.contents).length;o<s;o++)i=c[o],("function"==typeof t?t(i):void 0)&&r.push(i);for(e in u.children)null!=u.children[e].tree&&n.push(u.children[e].tree)}return r},t.prototype.filter=function(e){var n;return(n=function(i){var r,a,o,l,s,h,c,u,d,f,p;for(r in(a=new t({x:i.x,y:i.y,width:i.width,height:i.height,maxElements:i.maxElements})).size=0,i.children)null!=i.children[r].tree&&(a.children[r].tree=n(i.children[r].tree),a.size+=null!=(u=null!=(d=a.children[r].tree)?d.size:void 0)?u:0);for(l=0,h=(f=i.oversized).length;l<h;l++)o=f[l],(null==e||("function"==typeof e?e(o):void 0))&&a.oversized.push(o);for(s=0,c=(p=i.contents).length;s<c;s++)o=p[s],(null==e||("function"==typeof e?e(o):void 0))&&a.contents.push(o);return a.size+=a.oversized.length+a.contents.length,0===a.size?null:a})(this)},t.prototype.reject=function(t){return this.filter((function(e){return!("function"==typeof t?t(e):void 0)}))},t.prototype.visit=function(t){var e,n,i;for(n=[this];n.length>0;)for(e in i=n.shift(),t.bind(i)(),i.children)null!=i.children[e].tree&&n.push(i.children[e].tree);return this},t.prototype.pretty=function(){var t,e,n,i,r,a,o;for(a="",n=function(t){var e,n,i;for(i="",e=n=t;n<=0?e<0:e>0;n<=0?++e:--e)i+="   ";return i},e=[{label:"ROOT",tree:this,level:0}];e.length>0;){for(t in a+=(i=n((o=e.shift()).level))+"| "+o.label+"\n"+i+"| ------------\n",o.tree.oversized.length>0&&(a+=i+"| * Oversized elements *\n"+i+"|   "+o.tree.oversized+"\n"),o.tree.contents.length>0&&(a+=i+"| * Leaf content *\n"+i+"|   "+o.tree.contents+"\n"),r=!1,o.tree.children)null!=o.tree.children[t].tree&&(r=!0,e.unshift({label:t,tree:o.tree.children[t].tree,level:o.level+1}));r&&(a+=i+"└──┐\n")}return a},t}()})?i.apply(e,r):i)||(t.exports=a)},v3rV:function(t,e,n){"use strict";n.r(e),n.d(e,"inanimated",(function(){return a})),n.d(e,"removeAnimation",(function(){return o})),n.d(e,"removeDelay",(function(){return l}));var i=n("LvDl"),r=n.n(i);function a(t){return 0===r.a.get(t,"animation.duration")}function o(t){t.forEach((function(t){r.a.has(t,"animationDuration")?t.animationDuration(0):r.a.has(t,"animate")&&t.animate(!1)}))}function l(t,e){return r.a.get(t,"runtime.inanimate")?function(){return 0}:e}},xcGy:function(t,e,n){"use strict";n.r(e),n.d(e,"Pyramid",(function(){return M}));var i=n("LvDl"),r=n.n(i),a=n("vBe5"),o=n("ziQ1"),l=n("+3eq"),s=n("LWvD"),h=n("v3rV"),c=n("x+1q"),u=n("3y/1"),d=n("ejCe"),f=n("2YLo"),p=n("x5YE"),g=n("VLlq"),m=n("XKI8"),y=n("pYxU"),v=n("D3ez"),x=n("i+/1");function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function E(t,e,n){return(E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function O(t,e){return!e||"object"!==z(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var z=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function D(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=S(t);if(e){var r=S(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return O(this,n)}}Object(v.putGraph)("pyramid",x.Pyramid);var M=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}(v,t);var e,n,i,s=D(v);function v(){return b(this,v),s.apply(this,arguments)}return e=v,i=[{key:"getClassName",value:function(){return"Pyramid"}}],(n=[{key:"render",value:function(){this.detectDimensions();var t=this.options,e=this.root;t.fixedHeight=!0;var n=this.getSheetData(),i=Object(c.default)(n),r=this.runtime={width:t.width,height:t.height,inanimate:Object(h.inanimated)(t),sheet:n,formatter:i},a=r.data=this.prepareSheetData(n);if(Object(g.default)(this,{width:t.width}),Object(y.DownloadButton)(this,t.style.legend),Object(p.legendHelper)({instance:this}),!this.sheetsNotFound()){var o=n.pyramid,l=o.direction,s=o.showText;return this.categories=a.map((function(t){return t.label})),"up"===l&&this.categories.reverse(),this.renderSideLabels=!n.legend.enabled&&r.width>300&&s,this.layout=this.getLayout(),this.xScale=this.getXScale(),this.yScale=this.getYScale(),this.renderSideLabels?(this.gridLines=this.getGridLines(),this.labels=this.getLabels()):(this.gridLines&&(e.selectAll(".igc-ygrid").remove(),delete this.gridLines),this.labels&&(e.selectAll(".igc-ylabels").remove(),delete this.labels)),this.renderTransitions()}}},{key:"getLabels",value:function(){var t=this.layout,e=this.options,n=this.yScale,i=this.runtime,a=n.bandwidth();return Object(d.LeftStart)().scale(n).scaleData(Object(o.scaleOrdinal)(this.categories).domain(this.getYDomain())).bounds({width:t.labelWidth,height:a}).animate(!i.inanimate).style(r.a.extend({"text-anchor":"start"},e.style.graph.item.name))}},{key:"getLayout",value:function(){var t,e,n=this.runtime,i=this.options,r=n.width,o=n.height,l=.33*r;if(this.renderSideLabels){t=Object(u.getAllTextDimensions)(this.categories,i.style.graph.item.name);var s=Object(a.max)(t.collection.map((function(t){return t.width})));e=Math.min(s,l)}var h={top:0,bottom:0,left:this.renderSideLabels?e+10:0,right:0};return{margins:h,labelWidth:e,labelDimensions:t,graph:{width:r-h.left-h.right,height:o-h.top-h.bottom},chart:{width:r,height:o}}}},{key:"getYScale",value:function(){var t=this.layout.margins;return Object(o.scaleBand)().rangeRound([t.top,this.runtime.height]).domain(this.getYDomain())}},{key:"getXScale",value:function(){var t=this.runtime,e=this.layout,n=t.sheet,i=e.margins,r=e.graph,a=e.chart,l=[i.left+r.width/2,a.width-i.right];return n.pyramid.regularEdge?Object(o.scalePoint)().rangeRound(l).domain(this.getXDomain()):Object(o.scaleLinear)().rangeRound(l).domain(this.getXDomain())}},{key:"getGridLines",value:function(){var t=this.yScale,e=this.xScale,n=this.options,i=this.runtime,r=e(0);return function(e){var a=function(e,n){var i=e?t(e):t(l[n-1])+t.bandwidth();return i>1&&(i-=1),i},o=e.selectAll(".tick"),l=t.domain().concat([0]),s=!i.inanimate,h=o.data(l);h.transition().duration(0),o.size()&&o.size()===l.length&&(s=!1),h.exit().remove(),(h=h.enter().append("line").merge(h)).styles({stroke:n.style.grid.color,"shape-rendering":"crispEdges",opacity:s?0:.25}).attrs({x1:0,y1:a,x2:r,y2:a,class:"tick"}),s&&h.transition().duration(n.animation.duration).style("opacity",.25)}}},{key:"getYDomain",value:function(){var t=this.runtime,e=t.sheet,n=t.data.map((function(t){return t.index}));return"up"===e.pyramid.direction&&n.reverse(),n}},{key:"getXDomain",value:function(){var t=this.runtime,e=t.sheet,n=t.data;return e.pyramid.regularEdge?[0].concat(n.map((function(t){return t.index})).reverse()):[0,Object(a.max)(e.series[0].data)]}},{key:"renderTransitions",value:function(){var t=this,e=this.options,n=this.root,i=this.runtime,r=i.data,a=new f.Renderer({instance:this}),o=this.createAnimationCounter(2);this.containerSetup(),a.add((function(){n.attr("width",i.width).attr("height",i.height).transition().ease(l[e.animation.ease]).duration(e.animation.duration).on("start",(function(){t.events.call("startAnimation")})).on("end",(function(){o()}))})),this.gridLines&&a.addGrid(this.gridLines,"igc-ygrid"),this.labels&&a.addGrid(this.labels,"igc-ylabels"),a.addGraph([{graphs:[{type:"pyramid",data:r,animationEnd:o}]}]),a.start()}},{key:"graphInstanceSetup",value:function(t,e,n){var i=this.runtime,r=this.options,a=i.sheet,o=i.inanimate,l=i.formatter,s=a.pyramid;t.setup({xScale:this.xScale,yScale:this.yScale,transitionDuration:o?0:500,zeroEnding:"asis"!==s.endType,regularEdge:s.regularEdge,direction:s.direction,singleColor:s.singleColor,showValues:s.showValues,textStyle:r.style.graph.item.value,tooltipText:function(t){return t.label},tooltipValue:function(t){return l.tooltip.x.format(t.rawValue)}}).animate(!o).tooltip(Object(m.createStyledTooltip)(this)).labelFormat(l.labels).data(e.data).groupId(n),t.dispatch().on("animationEnd",e.animationEnd)}},{key:"emptySheetData",value:function(){return r.a.merge(E(S(v.prototype),"emptySheetData",this).call(this),{series:[{title:"",type:"pyramid"}],categories:{},pyramid:{showValues:!1,showText:!0,regularEdge:!0,endType:"zero",direction:"up"},legend:{enabled:!1}})}},{key:"prepareSheetData",value:function(t){var e=t.series[0],n=t.categories.colors,i=t.categories.data,a=Object(p.createLegendData)(this);return e.data.reduce((function(t,o,l){var s=Object(u.replaceBlank)(o,null);if(null===s)return t;var h=Object(u.replaceBlank)(i[l]),c=Object(u.getColor)(l,n);return a({title:h,color:c,groupId:l}).active?(t.push({value:s,label:h,color:c,rawValue:e.rawData[l],link:r.a.get(e,"links[".concat(l,"]"),null),index:l+1}),t):t}),[])}},{key:"applySheetOptions",value:function(t){var e=function(e){return t[e]||t[0]};this.options.sheets.forEach((function(t,n){var i=e(n+1);r.a.merge(t.categories,i.categories),r.a.merge(t.pyramid,i.pyramid),r.a.merge(t.legend,i.legend),i.tooltip&&(t.tooltip=t.tooltip||{},r.a.merge(t.tooltip,i.tooltip)),i.labels&&(t.labels=t.labels||{},r.a.merge(t.labels,i.labels)),i.axis&&(t.axis||(t.axis=[{}]),r.a.merge(t.axis[0],i.axis[0]))}))}}])&&w(e.prototype,n),i&&w(e,i),v}(s.default)}}]);